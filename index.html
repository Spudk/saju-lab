<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2026 ì‚¬ì£¼ Ã— 16ìœ í˜• ìš´ì„¸ ë¦¬í¬íŠ¸</title>

<!-- Fonts & Icons -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

<!-- Chart / 3D -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>


<!-- ë§Œì„¸ë ¥ ì •í™•ë„ ì—…ê·¸ë ˆì´ë“œ (ì ˆê¸°/íŒ”ì ê³„ì‚° ë¼ì´ë¸ŒëŸ¬ë¦¬: lunar-javascript) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/lunar-javascript/1.6.10/lunar.min.js"></script>
<style>
:root{
  --k1:#ff9ff3;
  --k2:#74b9ff;
  --k3:#ffeaa7;
  --bg:#050816;
  --card:#0b1020;
  --border:#222738;
  --txt:#e5e9ff;
  --muted:#94a3b8;
  --accent:#a855f7;
}
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Poppins','Apple SD Gothic Neo','Pretendard',system-ui,sans-serif;
}
body{
  min-height:100vh;
  background:
    radial-gradient(circle at 10% 0%,rgba(255,159,243,.16),transparent 60%),
    radial-gradient(circle at 90% 0%,rgba(116,185,255,.14),transparent 60%),
    radial-gradient(circle at 50% 120%,rgba(255,234,167,.18),transparent 65%),
    #020617;
  color:var(--txt);
  padding-bottom:80px;
}
.container{max-width:1100px;margin:0 auto;padding:18px 16px 32px;}
.glass{
  background:linear-gradient(135deg,rgba(15,23,42,.92),rgba(15,23,42,.96));
  border-radius:26px;
  border:1px solid rgba(148,163,184,.15);
  box-shadow:0 22px 60px rgba(15,23,42,.75),0 0 0 1px rgba(148,163,184,.1);
}
.header-wrap{padding:28px 22px 26px;margin-bottom:20px;position:relative;overflow:hidden;}
.header-gradient{
  position:absolute;inset:-80px;
  background:
    radial-gradient(circle at 0% 0%,rgba(255,159,243,.25),transparent 55%),
    radial-gradient(circle at 100% 0%,rgba(129,140,248,.22),transparent 55%),
    radial-gradient(circle at 50% 120%,rgba(94,234,212,.2),transparent 60%);
  opacity:.8;pointer-events:none;
}
.header-content{position:relative;z-index:1;}
.top-bar{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px;}
.brand{display:flex;align-items:center;gap:10px;}
.brand-badge{
  width:32px;height:32px;border-radius:999px;
  background:radial-gradient(circle at 30% 0%,#fff,rgba(248,250,252,.1));
  display:flex;align-items:center;justify-content:center;
  color:#0f172a;font-weight:800;font-size:0.9rem;
  box-shadow:0 0 0 1px rgba(248,250,252,.7),0 8px 30px rgba(15,23,42,.5);
}
.brand-title{font-size:1.1rem;font-weight:700;letter-spacing:.06em;text-transform:uppercase;}
.brand-sub{font-size:.7rem;color:rgba(226,232,240,.7);text-transform:uppercase;}

.lang-select{
  display:flex;align-items:center;gap:8px;
  padding:6px 10px;border-radius:999px;
  backdrop-filter:blur(16px);
  background:rgba(15,23,42,.75);
  border:1px solid rgba(148,163,184,.4);
  font-size:.8rem;
}
.lang-select label{color:var(--muted);font-size:.78rem;}
.lang-select select{
  border:none;background:transparent;color:var(--txt);
  font-size:.82rem;padding:4px 6px;
}
.lang-select select:focus{outline:none;}

.hero-title{
  font-size:2.1rem;
  line-height:1.28;
  font-weight:800;
  background:linear-gradient(120deg,#e5e7eb,#f9a8d4,#93c5fd);
  -webkit-background-clip:text;
  color:transparent;
}
.hero-sub{
  margin-top:10px;
  font-size:.95rem;
  color:var(--muted);
}
.hero-tags{margin-top:16px;display:flex;flex-wrap:wrap;gap:8px;}
.hero-tag{
  font-size:.7rem;padding:4px 9px;border-radius:999px;
  border:1px solid rgba(148,163,184,.45);
  color:#cbd5f5;background:rgba(15,23,42,.6);
}

/* Card */
.card{
  margin-top:14px;
  border-radius:24px;
  background:radial-gradient(circle at 0 0,rgba(148,163,184,.15),transparent 55%),
             linear-gradient(135deg,rgba(15,23,42,.96),rgba(15,23,42,.98));
  border:1px solid rgba(30,64,175,.6);
  padding:22px 18px 20px;
}
.card h2,.card h3{margin-bottom:12px;font-weight:700;}
.section-title{
  font-size:1.15rem;
  display:flex;align-items:center;gap:10px;
}
.section-title::before{
  content:"";width:4px;height:18px;
  border-radius:999px;
  background:linear-gradient(180deg,#a855f7,#38bdf8);
}

/* Inputs */
.row{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:10px;}
input,select,textarea{
  flex:1;
  padding:10px 12px;
  border-radius:16px;
  border:1px solid rgba(148,163,184,.5);
  background:rgba(15,23,42,.9);
  color:var(--txt);
  font-size:.85rem;
}
input::placeholder{color:#64748b;}
input:focus,select:focus{
  outline:none;
  border-color:#a855f7;
  box-shadow:0 0 0 1px rgba(168,85,247,.5);
}
label{font-size:.8rem;color:var(--muted);}

textarea{min-height:84px;resize:vertical;}
textarea::placeholder{color:#64748b;}

.chip-grid{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;}
.chip{
  user-select:none;
  padding:7px 10px;
  border-radius:999px;
  font-size:.74rem;
  border:1px solid rgba(148,163,184,.55);
  background:rgba(15,23,42,.85);
  color:#e5e7eb;
  cursor:pointer;
  transition:.12s;
}
.chip:hover{transform:translateY(-1px);}
.chip.selected{
  border-color:#22d3ee;
  background:radial-gradient(circle at 0 0,rgba(34,211,238,.22),rgba(15,23,42,.98));
  box-shadow:0 0 0 1px rgba(34,211,238,.45);
}
.small-note{margin-top:6px;font-size:.72rem;color:rgba(148,163,184,.9);line-height:1.35;}

.btn-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px;}
.btn.secondary{
  background:rgba(15,23,42,.9);
  color:var(--txt);
  border:1px solid rgba(148,163,184,.45);
  box-shadow:none;
}
.btn.secondary:hover{box-shadow:0 14px 34px rgba(15,23,42,.45);}

@media print{
  body{background:#fff !important;color:#111827 !important;padding-bottom:0 !important;}
  .header-wrap,.lang-select,.hero-tags,#inputCard,#loading,.btn-row .btn.secondary{display:none !important;}
  .glass{box-shadow:none !important;border-color:#e5e7eb !important;background:#fff !important;}
  .card{border-color:#e5e7eb !important;background:#fff !important;}
  .ad-banner{border:1px solid #e5e7eb !important;background:#fff !important;color:#111827 !important;}
  .ad-label{color:#111827 !important;}
}

/* Button */
.btn{
  margin-top:6px;
  display:inline-flex;align-items:center;justify-content:center;
  gap:8px;
  padding:11px 20px;
  border-radius:999px;
  border:none;
  background:linear-gradient(120deg,#a855f7,#6366f1,#22d3ee);
  background-size:200% 200%;
  color:#0f172a;
  font-weight:700;
  font-size:.92rem;
  cursor:pointer;
  box-shadow:0 12px 35px rgba(56,189,248,.5);
  transition:transform .1s,box-shadow .1s,background-position .5s;
}
.btn:hover{
  transform:translateY(-1px);
  background-position:100% 0;
  box-shadow:0 16px 40px rgba(56,189,248,.7);
}
.btn:active{transform:scale(.97);box-shadow:0 9px 22px rgba(56,189,248,.5);}

/* MBTI Grid */
.mbti-grid{
  display:grid;
  grid-template-columns:repeat(4,minmax(0,1fr));
  gap:6px;
  margin-top:8px;
}
.mbti-opt{
  padding:8px 0;
  border-radius:14px;
  font-size:.8rem;
  text-align:center;
  cursor:pointer;
  border:1px solid rgba(148,163,184,.5);
  background:rgba(15,23,42,.9);
  color:#e5e7eb;
  transition:.12s;
}
.mbti-opt.selected{
  border-color:#a855f7;
  background:radial-gradient(circle at 0 0,rgba(244,114,182,.32),rgba(15,23,42,.98));
  color:#f9fafb;
  box-shadow:0 0 0 1px rgba(244,114,182,.6);
}

/* Pillars */
.pillar-grid{
  display:grid;
  grid-template-columns:repeat(4,minmax(0,1fr));
  gap:10px;
  margin-top:10px;
}
.pillar{
  border-radius:18px;
  padding:12px 8px 14px;
  text-align:center;
  background:linear-gradient(145deg,rgba(15,23,42,.9),rgba(17,24,39,.98));
  border:1px solid rgba(148,163,184,.6);
}
.pillar-label{font-size:.78rem;color:var(--muted);margin-bottom:4px;}
.pillar-gan{font-size:1.3rem;font-weight:800;}
.pillar-ji{font-size:1.1rem;margin-top:2px;}
.pillar-elem{margin-top:4px;font-size:.8rem;color:#f9a8d4;}

/* Blocks */
.block{
  margin-top:14px;
  padding:18px 14px 16px;
  border-radius:18px;
  background:radial-gradient(circle at 0 0,rgba(56,189,248,.2),transparent 55%),
             rgba(15,23,42,.98);
  border:1px solid rgba(148,163,184,.5);
}
.block h3{font-size:1rem;margin-bottom:6px;}
.block p{font-size:.86rem;color:#e2e8f0;}
.block ul{margin-top:6px;padding-left:18px;font-size:.83rem;color:var(--muted);}
.block ul li{margin-bottom:3px;}

.tag{
  display:inline-flex;align-items:center;gap:6px;
  padding:3px 9px;border-radius:999px;
  font-size:.72rem;margin-right:5px;margin-top:4px;
  border:1px solid rgba(148,163,184,.6);
  color:#cbd5f5;background:rgba(15,23,42,.9);
}
.tag i{font-size:.7rem;color:#f9a8d4;}


.month-grid{
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:10px;
  margin-top:10px;
}
@media(max-width:720px){.month-grid{grid-template-columns:1fr;}}
.month-card{
  border-radius:16px;
  padding:12px 12px;
  border:1px solid rgba(148,163,184,.45);
  background:rgba(2,6,23,.45);
}
.month-head{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:6px;}
.month-title{font-weight:700;font-size:.9rem;}
.badge{
  font-size:.68rem;
  padding:2px 8px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.5);
  color:#e2e8f0;
  background:rgba(15,23,42,.85);
  white-space:nowrap;
}
.badge.go{border-color:rgba(34,211,238,.65);}
.badge.caution{border-color:rgba(248,113,113,.6);}
.badge.ok{border-color:rgba(148,163,184,.55);}
.small-list{margin:0;padding-left:16px;font-size:.8rem;color:rgba(226,232,240,.85);}
.small-list li{margin-bottom:3px;}
.highlight{color:#fbbf24;font-weight:600;}

#chartContainer{height:260px;}
#soulSphere{
  width:100%;height:260px;
  border-radius:22px;
  background:radial-gradient(circle at 10% 0%,#0f172a,#020617);
  overflow:hidden;
}

/* ê´‘ê³  ë°°ë„ˆ (ì¡°ê¸ˆ ë” í¬ê²Œ) */
.ad-banner{
  border-radius:20px;
  border:1px dashed rgba(148,163,184,.85);
  padding:16px 18px;
  margin-top:22px;
  margin-bottom:10px;
  background:linear-gradient(135deg,rgba(15,23,42,.98),rgba(30,64,175,.95));
  font-size:.84rem;
  color:#e2e8f0;
  display:flex;align-items:flex-start;gap:12px;
  min-height:72px;
}
.ad-label{
  font-weight:700;
  color:#f9a8d4;
  font-size:.78rem;
  letter-spacing:.12em;
  text-transform:uppercase;
  white-space:nowrap;
  display:flex;align-items:center;gap:6px;
  padding-top:2px;
}
.ad-label i{font-size:.9rem;}
.ad-text{flex:1;}
.ad-email{font-weight:600;color:#e5e7eb;white-space:nowrap;font-size:.8rem;}

#loading{padding:80px 16px;text-align:center;}
#loading i{color:#a855f7;}

#dayMasterDesc{margin-top:16px;font-size:.88rem;color:#e2e8f0;text-align:center;}

.row-split{
  display:flex;gap:18px;flex-wrap:wrap;margin-top:14px;
}
.col{flex:1;min-width:280px;}

#result{margin-top:12px;}

@media(max-width:768px){
  .hero-title{font-size:1.6rem;}
  .pillar-grid{grid-template-columns:repeat(2,minmax(0,1fr));}
  .row{flex-direction:column;}
  .row-split{flex-direction:column;}
  .ad-banner{flex-direction:column;align-items:flex-start;}
  .ad-email{white-space:normal;}
}
</style>
</head>
<body>
<div class="container">

  <div class="glass header-wrap">
    <div class="header-gradient"></div>
    <div class="header-content">
      <div class="top-bar">
        <div class="brand">
          <div class="brand-badge">SA</div>
          <div>
            <div class="brand-title">SAJU LAB</div>
            <div class="brand-sub">K-DESTINY ENGINE</div>
          </div>
        </div>
        <div class="lang-select">
          <label for="lang">Language</label>
          <select id="lang" onchange="setLanguage(this.value)">
                        <option value="en">English</option>
<option value="ko">í•œêµ­ì–´</option>
            <option value="ja">æ—¥æœ¬èª</option>
            <option value="th">à¹„à¸—à¸¢</option>
            <option value="id">Bahasa Indonesia</option>
          </select>
        </div>
      </div>

      <h1 id="headerTitle" class="hero-title">
        2026 ì‚¬ì£¼ Ã— 16ìœ í˜•<br>ì§ì¥ì¸ Â· ì‚¬ì—…ê°€ í•„ìŠ¹ ì „ëµ ë¦¬í¬íŠ¸
      </h1>
      <p id="headerSubtitle" class="hero-sub">
        í•œêµ­å¼ ì‚¬ì£¼(å››æŸ±)ì™€ MBTI ê¸°ë°˜ 16ìœ í˜•ì„ ê²°í•©í•œ K-POP ìŠ¤íƒ€ì¼ ê¸€ë¡œë²Œ ìš´ì„¸ ì—”ì§„
      </p>
      <div class="hero-tags">
        <span class="hero-tag">K-Style Destiny</span>
        <span class="hero-tag">Business & Career Focus</span>
        <span class="hero-tag">MBTI Ã— Five Elements</span>
      </div>
    </div>
  </div>

  <!-- ì…ë ¥ ì¹´ë“œ -->
  <div class="glass card" id="inputCard">
    <h2 id="inputTitle" class="section-title">ì •ë³´ ì…ë ¥</h2>

    <div class="row">
      <input type="number" id="year" placeholder="ì¶œìƒë…„ë„ (ì˜ˆ: 1992)" min="1900" max="2030">
    </div>
    <div class="row">
      <select id="month">
        <option value="">ì›”</option>
      </select>
      <select id="day">
        <option value="">ì¼</option>
      </select>
    </div>
    <div class="row">
      <select id="hour"></select>
    </div>
    <div class="row">
      <input type="text" id="name" placeholder="ì„±í•¨ (ì˜ˆ: ê¹€ì² ìˆ˜) - ì´ë¦„ í’€ì´ í¬í•¨">
    </div>


    <!-- 2026 êµ¬ì²´í™” ì…ë ¥ (ì„ íƒ) -->
    <div style="margin-top:14px;padding:14px 12px;border-radius:18px;border:1px dashed rgba(148,163,184,.35);background:rgba(15,23,42,.55);">
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px;">
        <i class="fa-solid fa-sliders" style="color:#22d3ee;"></i>
        <div style="font-weight:700;font-size:.9rem;" id="extraTitle">2026 ì¶”ê°€ ë°ì´í„° (ì„ íƒ) â€” ë” êµ¬ì²´í•œ ì¡°ì–¸ìš©</div>
      </div>

      <div class="row">
        <select id="role2026">
          <option value="biz" selected>ì‚¬ì—…/ëŒ€í‘œ</option>
          <option value="job">ì§ì¥/íŒ€ì¥</option>
          <option value="switch">ì´ì§/ì „í™˜</option>
          <option value="start">ì°½ì—… ì¤€ë¹„</option>
        </select>
        <select id="focus2026">
          <option value="growth" selected>í™•ì¥(ìŠ¤ì¼€ì¼ì—…)</option>
          <option value="setup">ê¸°ì´ˆ/ì •ë¹„(ì‹œìŠ¤í…œ)</option>
          <option value="cleanup">ì •ë¦¬/ë¦¬ìŠ¤í¬ ê´€ë¦¬</option>
        </select>
      </div>

      <label id="goalLabel">2026 í•µì‹¬ ëª©í‘œ (ë³µìˆ˜ ì„ íƒ)</label>
      <div class="chip-grid" id="goalChips"></div>
      <input type="hidden" id="goals" value="">

      <div class="row" style="margin-top:10px;">
        <div style="flex:1;">
          <label id="riskLabelTitle">ë¦¬ìŠ¤í¬ ì„±í–¥</label>
          <input type="range" id="risk" min="0" max="100" value="50">
          <div class="small-note" id="riskLabel">ì¤‘ë¦½: ê³µê²©ë„, ë°©ì–´ë„ ì•„ë‹Œ â€˜ê· í˜•í˜•â€™</div>
        </div>
      </div>

      <label id="worryLabel" style="margin-top:10px;display:block;">ì§€ê¸ˆ ê°€ì¥ í° ê³ ë¯¼ (í•œ ì¤„)</label>
      <textarea id="worry" placeholder="ì˜ˆ: ì‹ ê·œ ê±°ë˜ì²˜ í™•ì¥ / í˜„ê¸ˆíë¦„ / íŒŒíŠ¸ë„ˆì‹­ / ê±´ê°• ë£¨í‹´"></textarea>

      <div class="small-note" id="extraHint">â€» ì´ í•­ëª©ë“¤ì€ â€˜ì–¸ì œ ë¬´ì—‡ì„ í• ì§€â€™ íƒ€ì„ë¼ì¸ì„ ë” í˜„ì‹¤ì ìœ¼ë¡œ ë§Œë“œëŠ” ë°ë§Œ ì‚¬ìš©ë¼ìš”.</div>
    </div>


    <label id="mbtiLabel">ì„±í–¥ 16ìœ í˜• (MBTI ê¸°ë°˜)</label>
    <div class="mbti-grid" id="mbtiGrid"></div>
    <input type="hidden" id="mbti">

    <!-- ë¬´ë£Œ ëœë¤ Creative ëª¨ë“œ ì˜µì…˜ -->
    <div style="margin-top:10px;font-size:0.8rem;color:#94a3b8;">
      <label style="display:flex;align-items:center;gap:6px;cursor:pointer;">
        <input type="checkbox" id="aiCreative" style="width:14px;height:14px;">
        <span id="aiCreativeLabelText">AI Creative ëª¨ë“œ í™œì„±í™” (ì¡°ê¸ˆ ë” ì†”ì§í•˜ê³  ê°œì¸ì ì¸ ì¡°ì–¸ ì¶”ê°€)</span>
      </label>
    </div>

    <button class="btn" id="btnStart" onclick="startAnalysis()">
      <i class="fa-solid fa-wand-magic-sparkles"></i>
      <span>ì •ë°€ ë¶„ì„ ì‹œì‘</span>
    </button>

    <!-- ì²« í™”ë©´ í•˜ë‹¨ ê´‘ê³  -->
    <div class="ad-banner">
      <span class="ad-label"><i class="fa-regular fa-rectangle-ad"></i> AD</span>
      <span class="ad-text" id="adHomeText">
        ì´ê³³ì€ ê´‘ê³  ì˜ì—­ì…ë‹ˆë‹¤. ì¶”í›„ ì‹¤ì œ ê´‘ê³ ê°€ ë…¸ì¶œë©ë‹ˆë‹¤.
      </span>
      <span class="ad-email" id="adHomeEmail">
        ê´‘ê³ ë¬¸ì˜: daezhobiz@gmail.com
      </span>
    </div>
  </div>

  <!-- ë¡œë”© -->
  <div id="loading" style="display:none;">
    <i class="fas fa-yin-yang fa-spin fa-4x"></i>
    <h2 id="loadingText" style="margin-top:22px;font-size:1rem;">
      ì²œê°„Â·ì§€ì§€ë¥¼ ì„¸íŒ…í•˜ê³  ì˜¤í–‰ ë°¸ëŸ°ìŠ¤ë¥¼ íŠœë‹ ì¤‘ì…ë‹ˆë‹¤...
    </h2>
  </div>

  <!-- ê²°ê³¼ -->
  <div id="result" style="display:none;">

    <!-- ê²°ê³¼ ìƒë‹¨ ê´‘ê³  -->
    <div class="ad-banner">
      <span class="ad-label"><i class="fa-regular fa-rectangle-ad"></i> AD</span>
      <span class="ad-text" id="adResultText">
        ì´ê³³ì€ ê´‘ê³  ì˜ì—­ì…ë‹ˆë‹¤. ì¶”í›„ ì‹¤ì œ ê´‘ê³ ê°€ ë…¸ì¶œë©ë‹ˆë‹¤.
      </span>
      <span class="ad-email" id="adResultEmail">
        ê´‘ê³ ë¬¸ì˜: daezhobiz@gmail.com
      </span>
    </div>

    <div class="glass card">
      <h2 class="section-title" id="pillarTitle">ë§Œì„¸ë ¥ (å››æŸ±å…«å­—)</h2>
      <div class="pillar-grid" id="pillars"></div>
      <div id="dayMasterDesc"></div>
    </div>

    <div class="row-split">
      <div class="glass card col">
        <h3 id="sphereTitle" class="section-title">ë‚˜ì˜ ì˜í˜¼ êµ¬ì²´ (é­‚çƒ)</h3>
        <div id="soulSphere"></div>
      </div>
      <div class="glass card col">
        <h3 id="chartTitle" class="section-title">ì˜¤í–‰ ë°¸ëŸ°ìŠ¤ ë ˆì´ë” ì°¨íŠ¸</h3>
        <div id="chartContainer"><canvas id="elemChart"></canvas></div>
        <div id="elemDesc" style="margin-top:10px;font-size:.86rem;color:var(--muted);"></div>
      </div>
    </div>

    <div class="glass card">
      <h2 class="section-title" id="reportTitle">2026ë…„ ì§ì¥Â·ì‚¬ì—… ìš´ì„¸ ì „ëµ ë¦¬í¬íŠ¸</h2>
      <div id="reportBlocks"></div>

      <!-- ğŸ”® ëœë¤ Creative ë³´ë„ˆìŠ¤ ë¦¬ë”© ì˜ì—­ -->
      <div id="aiCreativeBlock"></div>
    </div>

    <div class="btn-row">
    <button class="btn secondary" id="btnPrint" onclick="window.print()">
      <i class="fa-solid fa-print"></i>
      <span>ë¦¬í¬íŠ¸ í”„ë¦°íŠ¸</span>
    </button>

    <button class="btn" id="btnRetry" onclick="location.reload()">
      <i class="fa-solid fa-rotate-left"></i>
      <span>ë‹¤ë¥¸ ì‚¬ëŒ ë‹¤ì‹œ ë¶„ì„í•˜ê¸°</span>
    </button>
  </div>
  </div>

</div>

<script>
// ================== ê¸°ë³¸ ë°ì´í„° ==================
const GAN = ["ê°‘","ì„","ë³‘","ì •","ë¬´","ê¸°","ê²½","ì‹ ","ì„","ê³„"];
const JI  = ["ì","ì¶•","ì¸","ë¬˜","ì§„","ì‚¬","ì˜¤","ë¯¸","ì‹ ","ìœ ","ìˆ ","í•´"];
const ELEM = {ê°‘:"ëª©",ì„:"ëª©",ë³‘:"í™”",ì •:"í™”",ë¬´:"í† ",ê¸°:"í† ",ê²½:"ê¸ˆ",ì‹ :"ê¸ˆ",ì„:"ìˆ˜",ê³„:"ìˆ˜"};
const MBTI16 = ['INTJ','INTP','ENTJ','ENTP','INFJ','INFP','ENFJ','ENFP','ISTJ','ISFJ','ESTJ','ESFJ','ISTP','ISFP','ESTP','ESFP'];


const GOAL_OPTIONS = [
  {key:"sales", label:{ko:"ë§¤ì¶œ/ê±°ë˜ì²˜",ja:"å£²ä¸Š/å–å¼•å…ˆ",th:"à¸¢à¸­à¸”à¸‚à¸²à¸¢/à¸¥à¸¹à¸à¸„à¹‰à¸²",id:"Penjualan/klien",en:"Sales/clients"}, icon:"fa-chart-line"},
  {key:"brand", label:{ko:"ë¸Œëœë”©/ë§ˆì¼€íŒ…",ja:"ãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°/ãƒãƒ¼ã‚±",th:"à¹à¸šà¸£à¸™à¸”à¹Œ/à¸à¸²à¸£à¸•à¸¥à¸²à¸”",id:"Brand/marketing",en:"Brand/marketing"}, icon:"fa-bullhorn"},
  {key:"product", label:{ko:"ìƒí’ˆ/ì„œë¹„ìŠ¤",ja:"å•†å“/ã‚µãƒ¼ãƒ“ã‚¹",th:"à¸ªà¸´à¸™à¸„à¹‰à¸²/à¸šà¸£à¸´à¸à¸²à¸£",id:"Produk/layanan",en:"Product/service"}, icon:"fa-cube"},
  {key:"people", label:{ko:"ì¸ì¬/ì¡°ì§",ja:"äººæ/çµ„ç¹”",th:"à¸„à¸™/à¸—à¸µà¸¡",id:"Orang/tim",en:"People/team"}, icon:"fa-people-group"},
  {key:"money", label:{ko:"íˆ¬ì/ìì‚°",ja:"æŠ•è³‡/è³‡ç”£",th:"à¸¥à¸‡à¸—à¸¸à¸™/à¸—à¸£à¸±à¸à¸¢à¹Œà¸ªà¸´à¸™",id:"Investasi/aset",en:"Investment/assets"}, icon:"fa-coins"},
  {key:"system", label:{ko:"ì‹œìŠ¤í…œ/ìë™í™”",ja:"ä»•çµ„ã¿/è‡ªå‹•åŒ–",th:"à¸£à¸°à¸šà¸š/à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´",id:"Sistem/otomasi",en:"System/automation"}, icon:"fa-gears"},
  {key:"health", label:{ko:"ê±´ê°•/ìŠµê´€",ja:"å¥åº·/ç¿’æ…£",th:"à¸ªà¸¸à¸‚à¸ à¸²à¸/à¸§à¸´à¸™à¸±à¸¢",id:"Kesehatan/kebiasaan",en:"Health/habits"}, icon:"fa-heart-pulse"},
  {key:"study", label:{ko:"í•™ìŠµ/ìê²©",ja:"å­¦ç¿’/è³‡æ ¼",th:"à¹€à¸£à¸µà¸¢à¸™/à¹ƒà¸šà¸£à¸±à¸šà¸£à¸­à¸‡",id:"Belajar/sertifikasi",en:"Study/certification"}, icon:"fa-graduation-cap"}
];

function initGoalChips(){
  const wrap=document.getElementById("goalChips");
  if(!wrap) return;
  wrap.innerHTML="";
  const hidden=document.getElementById("goals");
  let selected = new Set((hidden.value||"").split(",").filter(Boolean));

  GOAL_OPTIONS.forEach(opt=>{
    const chip=document.createElement("div");
    chip.className="chip"+(selected.has(opt.key)?" selected":"");
    const lab = (opt.label && (opt.label[currentLang]||opt.label.ko)) || opt.ko || opt.key;
    chip.innerHTML = `<i class="fa-solid ${opt.icon}" style="margin-right:6px;opacity:.85;"></i>${lab}`;
    chip.onclick=()=>{
      if(selected.has(opt.key)) selected.delete(opt.key); else selected.add(opt.key);
      hidden.value = Array.from(selected).join(",");
      chip.classList.toggle("selected");
    };
    wrap.appendChild(chip);
  });
}

function setRiskLabel(){
  const el=document.getElementById("risk");
  const label=document.getElementById("riskLabel");
  if(!el||!label) return;
  const v=parseInt(el.value||"50",10);

  const map = {
    ko:{
      base:"ì¤‘ë¦½: ê³µê²©ë„, ë°©ì–´ë„ ì•„ë‹Œ â€˜ê· í˜•í˜•â€™",
      a:"ë³´ìˆ˜í˜•: ì•ˆì „ì¥ì¹˜Â·í˜„ê¸ˆíë¦„ ìš°ì„ , í° ë² íŒ…ì€ ëŠ¦ê²Œ",
      b:"ì‹ ì¤‘í˜•: ê²€ì¦â†’í™•ì¥ ìˆœì„œ, ê³„ì•½Â·ë¦¬ìŠ¤í¬ ê´€ë¦¬ ê°•ì ",
      c:"ê· í˜•í˜•: ì‹¤í—˜ê³¼ ë°©ì–´ë¥¼ ê°™ì´, ì›”ë³„ ì²´í¬ê°€ í•µì‹¬",
      d:"ê³µê²©í˜•: ê¸°íšŒ í¬ì°© ë¹ ë¦„(ëŒ€ì‹  ì˜¤ë²„í˜ì´ìŠ¤ ì£¼ì˜)",
      e:"ì´ˆê³µê²©í˜•: â€˜í•œ ë²ˆì— í¬ê²Œâ€™ ì„±í–¥(ë ˆë²„ë¦¬ì§€Â·ê±´ê°•Â·ê´€ê³„ ë¦¬ìŠ¤í¬ ì¡°ì‹¬)"
    },
    ja:{
      base:"ä¸­ç«‹ï¼šæ”»ã‚ã‚‚å®ˆã‚Šã‚‚ãƒãƒ©ãƒ³ã‚¹å‹",
      a:"ä¿å®ˆå‹ï¼šå®‰å…¨è£…ç½®ã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼å„ªå…ˆ",
      b:"æ…é‡å‹ï¼šæ¤œè¨¼â†’æ‹¡å¤§ã®é †ã€å¥‘ç´„/ãƒªã‚¹ã‚¯ç®¡ç†ãŒå¾—æ„",
      c:"ãƒãƒ©ãƒ³ã‚¹å‹ï¼šå®Ÿé¨“ã¨é˜²å¾¡ã‚’ä¸¡ç«‹ã€æœˆæ¬¡ãƒã‚§ãƒƒã‚¯ãŒéµ",
      d:"æ”»æ’ƒå‹ï¼šãƒãƒ£ãƒ³ã‚¹å¯ŸçŸ¥ãŒé€Ÿã„ï¼ˆã‚ªãƒ¼ãƒãƒ¼ãƒšãƒ¼ã‚¹æ³¨æ„ï¼‰",
      e:"è¶…æ”»æ’ƒå‹ï¼šä¸€æ°—ã«å¤§ããï¼ˆãƒ¬ãƒãƒ¬ãƒƒã‚¸/å¥åº·/é–¢ä¿‚ãƒªã‚¹ã‚¯æ³¨æ„ï¼‰"
    },
    th:{
      base:"à¸ªà¸¡à¸”à¸¸à¸¥: à¹„à¸¡à¹ˆà¸šà¸¸à¸à¹„à¸¡à¹ˆà¸£à¸±à¸šà¸¡à¸²à¸à¹€à¸à¸´à¸™à¹„à¸›",
      a:"à¸ªà¸²à¸¢à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢: à¹€à¸™à¹‰à¸™à¸à¸±à¸™à¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¹ˆà¸¢à¸‡à¹à¸¥à¸°à¸à¸£à¸°à¹à¸ªà¹€à¸‡à¸´à¸™à¸ªà¸”",
      b:"à¸ªà¸²à¸¢à¸£à¸­à¸šà¸„à¸­à¸š: à¸—à¸”à¸¥à¸­à¸‡à¸à¹ˆà¸­à¸™à¹à¸¥à¹‰à¸§à¸„à¹ˆà¸­à¸¢à¸‚à¸¢à¸²à¸¢",
      c:"à¸ªà¸¡à¸”à¸¸à¸¥: à¸—à¸³à¸—à¸±à¹‰à¸‡à¸—à¸”à¸¥à¸­à¸‡à¹à¸¥à¸°à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ à¸à¸£à¹‰à¸­à¸¡à¹€à¸Šà¹‡à¸à¸—à¸¸à¸à¹€à¸”à¸·à¸­à¸™",
      d:"à¸ªà¸²à¸¢à¸šà¸¸à¸: à¸ˆà¸±à¸šà¹‚à¸­à¸à¸²à¸ªà¹„à¸§ (à¸£à¸°à¸§à¸±à¸‡à¹€à¸£à¹ˆà¸‡à¹€à¸à¸´à¸™à¹„à¸›)",
      e:"à¸šà¸¸à¸à¸ªà¸¸à¸”: à¸Šà¸­à¸šà¸—à¸¸à¹ˆà¸¡à¸„à¸£à¸±à¹‰à¸‡à¹ƒà¸«à¸à¹ˆ (à¸£à¸°à¸§à¸±à¸‡à¸«à¸™à¸µà¹‰/à¸ªà¸¸à¸‚à¸ à¸²à¸/à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ)"
    },
    id:{
      base:"Netral: seimbang antara agresif dan defensif",
      a:"Konservatif: utamakan pengaman & arus kas",
      b:"Hati-hati: validasiâ†’ekspansi, kuat di kontrak & risiko",
      c:"Seimbang: eksperimen + perlindungan, kunci ada di cek bulanan",
      d:"Agresif: cepat menangkap peluang (waspada over-pace)",
      e:"Sangat agresif: sekali gas besar (waspada leverage/kesehatan/relasi)"
    },
    en:{
      base:"Neutral: balanced between offense and defense",
      a:"Conservative: prioritize safeguards & cash flow",
      b:"Cautious: validate â†’ expand, strong at contracts & risk control",
      c:"Balanced: experiment and protect in parallel, monthly check is key",
      d:"Aggressive: fast at spotting opportunities (watch over-pace)",
      e:"Ultra-aggressive: big bets (watch leverage/health/relationships)"
    }
  }[currentLang] || map.ko;

  let txt = map.base;
  if(v<=25) txt=map.a;
  else if(v<=45) txt=map.b;
  else if(v<=65) txt=map.c;
  else if(v<=85) txt=map.d;
  else txt=map.e;

  label.textContent = txt;
}


let currentLang = 'ko';

// ì‹œê°„ ë ˆì´ë¸”
const HOUR_LABELS = {
  ko:[
    "ìì‹œ 23:30~01:29","ì¶•ì‹œ 01:30~03:29","ì¸ì‹œ 03:30~05:29","ë¬˜ì‹œ 05:30~07:29",
    "ì§„ì‹œ 07:30~09:29","ì‚¬ì‹œ 09:30~11:29","ì˜¤ì‹œ 11:30~13:29","ë¯¸ì‹œ 13:30~15:29",
    "ì‹ ì‹œ 15:30~17:29","ìœ ì‹œ 17:30~19:29","ìˆ ì‹œ 19:30~21:29","í•´ì‹œ 21:30~23:29"
  ],
  ja:[
    "å­ã®åˆ» 23:30ã€œ01:29","ä¸‘ã®åˆ» 01:30ã€œ03:29","å¯…ã®åˆ» 03:30ã€œ05:29","å¯ã®åˆ» 05:30ã€œ07:29",
    "è¾°ã®åˆ» 07:30ã€œ09:29","å·³ã®åˆ» 09:30ã€œ11:29","åˆã®åˆ» 11:30ã€œ13:29","æœªã®åˆ» 13:30ã€œ15:29",
    "ç”³ã®åˆ» 15:30ã€œ17:29","é…‰ã®åˆ» 17:30ã€œ19:29","æˆŒã®åˆ» 19:30ã€œ21:29","äº¥ã®åˆ» 21:30ã€œ23:29"
  ],
  th:[
    "23:30â€“01:29","01:30â€“03:29","03:30â€“05:29","05:30â€“07:29",
    "07:30â€“09:29","09:30â€“11:29","11:30â€“13:29","13:30â€“15:29",
    "15:30â€“17:29","17:30â€“19:29","19:30â€“21:29","21:30â€“23:29"
  ],
  id:[
    "23:30â€“01:29","01:30â€“03:29","03:30â€“05:29","05:30â€“07:29",
    "07:30â€“09:29","09:30â€“11:29","11:30â€“13:29","13:30â€“15:29",
    "15:30â€“17:29","17:30â€“19:29","19:30â€“21:29","21:30â€“23:29"
  ],
  en:[
    "23:30â€“01:29","01:30â€“03:29","03:30â€“05:29","05:30â€“07:29",
    "07:30â€“09:29","09:30â€“11:29","11:30â€“13:29","13:30â€“15:29",
    "15:30â€“17:29","17:30â€“19:29","19:30â€“21:29","21:30â€“23:29"
  ]
};

// ë‹¤êµ­ì–´ UI í…ìŠ¤íŠ¸
const TEXTS = {
  ko:{
    headerTitle:"2026 ì‚¬ì£¼ Ã— 16ìœ í˜•<br>ì§ì¥ì¸ Â· ì‚¬ì—…ê°€ í•„ìŠ¹ ì „ëµ ë¦¬í¬íŠ¸",
    headerSubtitle:"í•œêµ­å¼ ì‚¬ì£¼ì™€ MBTI ê¸°ë°˜ ì„±í–¥ 16ìœ í˜•ì„ ê²°í•©í•œ K-POP ìŠ¤íƒ€ì¼ ê¸€ë¡œë²Œ ìš´ì„¸ ì—”ì§„",
    inputTitle:"ì •ë³´ ì…ë ¥",
    namePlaceholder:"ì„±í•¨ (ì˜ˆ: ê¹€ì² ìˆ˜) - ì´ë¦„ í’€ì´ í¬í•¨",
    yearPlaceholder:"ì¶œìƒë…„ë„ (ì˜ˆ: 1992)",
    monthDefault:"ì›”",
    dayDefault:"ì¼",
    hourUnknown:"ì‹œê°„ ëª¨ë¦„ (ì •í™•ë„â†“)",
    mbtiLabel:"ì„±í–¥ 16ìœ í˜• (MBTI ê¸°ë°˜)",
        aiCreativeLabel:"AI Creative ëª¨ë“œ í™œì„±í™” (ì¡°ê¸ˆ ë” ì†”ì§í•˜ê³  ê°œì¸ì ì¸ ì¡°ì–¸ ì¶”ê°€)",
btnStart:"ì •ë°€ ë¶„ì„ ì‹œì‘",
    btnRetry:"ë‹¤ë¥¸ ì‚¬ëŒ ë‹¤ì‹œ ë¶„ì„í•˜ê¸°",
    loading:"ì²œê°„Â·ì§€ì§€ë¥¼ ì„¸íŒ…í•˜ê³  ì˜¤í–‰ ë°¸ëŸ°ìŠ¤ë¥¼ íŠœë‹ ì¤‘ì…ë‹ˆë‹¤...",
    pillarTitle:"ë§Œì„¸ë ¥ (å››æŸ±å…«å­—)",
    sphereTitle:"ë‚˜ì˜ ì˜í˜¼ êµ¬ì²´ (é­‚çƒ)",
    chartTitle:"ì˜¤í–‰ ë°¸ëŸ°ìŠ¤ ë ˆì´ë” ì°¨íŠ¸",
    reportTitle:"2026ë…„ ì§ì¥Â·ì‚¬ì—… ìš´ì„¸ ì „ëµ ë¦¬í¬íŠ¸",
btnPrint:"ë¦¬í¬íŠ¸ í”„ë¦°íŠ¸",
    extraTitle:"2026 ì¶”ê°€ ë°ì´í„° (ì„ íƒ) â€” ë” êµ¬ì²´í•œ ì¡°ì–¸ìš©",
            focusOpts:{"growth": "í™•ì¥(ìŠ¤ì¼€ì¼ì—…)", "setup": "ê¸°ì´ˆ/ì •ë¹„(ì‹œìŠ¤í…œ)", "cleanup": "ì •ë¦¬/ë¦¬ìŠ¤í¬ ê´€ë¦¬"},
roleOpts:{"biz": "ì‚¬ì—…/ëŒ€í‘œ", "job": "ì§ì¥/íŒ€ì¥", "switch": "ì´ì§/ì „í™˜", "start": "ì°½ì—… ì¤€ë¹„"},
goalLabel:"2026 í•µì‹¬ ëª©í‘œ (ë³µìˆ˜ ì„ íƒ)",
    riskLabelTitle:"ë¦¬ìŠ¤í¬ ì„±í–¥",
    worryLabel:"ì§€ê¸ˆ ê°€ì¥ í° ê³ ë¯¼ (í•œ ì¤„)",
        worryPlaceholder:"ì˜ˆ: ì‹ ê·œ ê±°ë˜ì²˜ í™•ì¥ / í˜„ê¸ˆíë¦„ / íŒŒíŠ¸ë„ˆì‹­ / ê±´ê°• ë£¨í‹´",
extraHint:"â€» ì´ í•­ëª©ë“¤ì€ â€˜ì–¸ì œ ë¬´ì—‡ì„ í• ì§€â€™ íƒ€ì„ë¼ì¸ì„ ë” í˜„ì‹¤ì ìœ¼ë¡œ ë§Œë“œëŠ” ë°ë§Œ ì‚¬ìš©ë¼ìš”.", 
    alertMissingDate:"ì¶œìƒ ì—°Â·ì›”Â·ì¼ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”."
  },
  ja:{
    headerTitle:"2026 å››æŸ±æ¨å‘½ Ã— 16ã‚¿ã‚¤ãƒ—<br>ãƒ“ã‚¸ãƒã‚¹æˆ¦ç•¥ãƒ¬ãƒãƒ¼ãƒˆ",
    headerSubtitle:"éŸ“å›½å¼å››æŸ±æ¨å‘½ã¨MBTIãƒ™ãƒ¼ã‚¹16ã‚¿ã‚¤ãƒ—ã‚’æ›ã‘åˆã‚ã›ãŸK-POPã‚¹ã‚¿ã‚¤ãƒ«å ã„ã‚¨ãƒ³ã‚¸ãƒ³",
    inputTitle:"æƒ…å ±å…¥åŠ›",
    namePlaceholder:"ãŠåå‰ï¼ˆä¾‹ï¼šå±±ç”°å¤ªéƒï¼‰",
    yearPlaceholder:"ç”Ÿå¹´ï¼ˆä¾‹ï¼š1992ï¼‰",
    monthDefault:"æœˆ",
    dayDefault:"æ—¥",
    hourUnknown:"ç”Ÿã¾ã‚ŒãŸæ™‚é–“ãŒä¸æ˜ï¼ˆç²¾åº¦ãƒ€ã‚¦ãƒ³ï¼‰",
    mbtiLabel:"16ã‚¿ã‚¤ãƒ—æ€§æ ¼ï¼ˆMBTIãƒ™ãƒ¼ã‚¹ï¼‰",
        aiCreativeLabel:"AI Creative ãƒ¢ãƒ¼ãƒ‰ï¼ˆã‚ˆã‚Šæ­£ç›´ã§å€‹äººçš„ãªåŠ©è¨€ã‚’è¿½åŠ ï¼‰",
btnStart:"è©³ç´°åˆ†æã‚¹ã‚¿ãƒ¼ãƒˆ",
    btnRetry:"åˆ¥ã®äººã‚’åˆ†æã™ã‚‹",
    loading:"åå¹²åäºŒæ”¯ã¨äº”è¡Œãƒãƒ©ãƒ³ã‚¹ã‚’è¨ˆç®—ã—ã¦ã„ã¾ã™...",
    pillarTitle:"å‘½å¼ï¼ˆå››æŸ±å…«å­—ï¼‰",
    sphereTitle:"é­‚ã®ã‚¨ãƒŠã‚¸ãƒ¼ãƒœãƒ¼ãƒ«",
    chartTitle:"äº”è¡Œãƒãƒ©ãƒ³ã‚¹ãƒ»ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ",
    reportTitle:"2026å¹´ ãƒ“ã‚¸ãƒã‚¹ãƒ»ã‚­ãƒ£ãƒªã‚¢é‹ãƒ¬ãƒãƒ¼ãƒˆ",
btnPrint:"ãƒ¬ãƒãƒ¼ãƒˆã‚’å°åˆ·",
    extraTitle:"2026 è¿½åŠ ãƒ‡ãƒ¼ã‚¿ï¼ˆä»»æ„ï¼‰â€” ã‚ˆã‚Šå…·ä½“çš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹ç”¨",
            focusOpts:{"growth": "æ‹¡å¤§(ã‚¹ã‚±ãƒ¼ãƒ«)", "setup": "åŸºç¤/æ•´å‚™(ä»•çµ„ã¿)", "cleanup": "æ•´ç†/ãƒªã‚¹ã‚¯ç®¡ç†"},
roleOpts:{"biz": "äº‹æ¥­/ä»£è¡¨", "job": "ä¼šç¤¾/ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼", "switch": "è»¢è·/è»¢æ›", "start": "èµ·æ¥­æº–å‚™"},
goalLabel:"2026 é‡ç‚¹ç›®æ¨™ï¼ˆè¤‡æ•°é¸æŠï¼‰",
    riskLabelTitle:"ãƒªã‚¹ã‚¯å‚¾å‘",
    worryLabel:"ä»Šã®æœ€å¤§ã®æ‚©ã¿ï¼ˆä¸€è¨€ï¼‰",
        worryPlaceholder:"ä¾‹ï¼šæ–°è¦å–å¼•å…ˆæ‹¡å¤§ / ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼ / ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚·ãƒƒãƒ— / å¥åº·ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³",
extraHint:"â€» ã“ã‚Œã‚‰ã¯ã€Œã„ã¤ä½•ã‚’ã™ã‚‹ã‹ã€ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ç²¾åº¦ã‚’ä¸Šã’ã‚‹ãŸã‚ã ã‘ã«ä½¿ã„ã¾ã™ã€‚", 
    alertMissingDate:"ç”Ÿå¹´æœˆæ—¥ï¼ˆå¹´ãƒ»æœˆãƒ»æ—¥ï¼‰ã‚’ã™ã¹ã¦å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"
  },
  th:{
    headerTitle:"à¸£à¸²à¸¢à¸‡à¸²à¸™à¸à¸¥à¸¢à¸¸à¸—à¸˜à¹Œà¸›à¸µ 2026<br>à¸‹à¸²à¸ˆà¸¹ Ã— à¸šà¸¸à¸„à¸¥à¸´à¸à¸ à¸²à¸ 16 à¹à¸šà¸š",
    headerSubtitle:"à¸œà¸ªà¸¡à¸”à¸§à¸‡à¸ˆà¸µà¸™à¸ªà¸µà¹ˆà¹€à¸ªà¸²à¸à¸±à¸š MBTI à¸ªà¹„à¸•à¸¥à¹Œ K-POP à¹€à¸à¸·à¹ˆà¸­à¹€à¸ˆà¸²à¸°à¸¥à¸¶à¸à¸à¸²à¸£à¸‡à¸²à¸™à¹à¸¥à¸°à¸˜à¸¸à¸£à¸à¸´à¸ˆ",
    inputTitle:"à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥",
    namePlaceholder:"à¸Šà¸·à¹ˆà¸­ (à¹€à¸Šà¹ˆà¸™ à¸˜à¸™à¸²à¸à¸£) - à¸£à¸§à¸¡à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸Šà¸·à¹ˆà¸­",
    yearPlaceholder:"à¸›à¸µà¹€à¸à¸´à¸” (à¹€à¸Šà¹ˆà¸™ 1992)",
    monthDefault:"à¹€à¸”à¸·à¸­à¸™",
    dayDefault:"à¸§à¸±à¸™",
    hourUnknown:"à¹„à¸¡à¹ˆà¸—à¸£à¸²à¸šà¹€à¸§à¸¥à¸²à¹€à¸à¸´à¸” (à¸„à¸§à¸²à¸¡à¹à¸¡à¹ˆà¸™à¸¢à¸³à¸¥à¸”à¸¥à¸‡)",
    mbtiLabel:"à¸šà¸¸à¸„à¸¥à¸´à¸à¸ à¸²à¸ 16 à¹à¸šà¸š (à¸­à¹‰à¸²à¸‡à¸­à¸´à¸‡ MBTI)",
        aiCreativeLabel:"à¹€à¸›à¸´à¸”à¹‚à¸«à¸¡à¸” AI Creative (à¹€à¸à¸´à¹ˆà¸¡à¸„à¸³à¹à¸™à¸°à¸™à¸³à¸—à¸µà¹ˆà¸•à¸£à¸‡à¹à¸¥à¸°à¹€à¸›à¹‡à¸™à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§à¸‚à¸¶à¹‰à¸™)",
btnStart:"à¹€à¸£à¸´à¹ˆà¸¡à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¹à¸šà¸šà¸¥à¸°à¹€à¸­à¸µà¸¢à¸”",
    btnRetry:"à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¹ƒà¸«à¹‰à¸„à¸™à¸­à¸·à¹ˆà¸™",
    loading:"à¸à¸³à¸¥à¸±à¸‡à¸„à¸³à¸™à¸§à¸“à¹€à¸ªà¸²à¸Ÿà¹‰à¸²â€“à¸”à¸´à¸™à¹à¸¥à¸°à¸ªà¸¡à¸”à¸¸à¸¥à¸˜à¸²à¸•à¸¸à¸—à¸±à¹‰à¸‡à¸«à¹‰à¸²...",
    pillarTitle:"à¸”à¸§à¸‡à¸Šà¸°à¸•à¸² (à¸ªà¸µà¹ˆà¹€à¸ªà¸²à¸ˆà¸²à¸›à¸°à¸ˆà¸·à¸­)",
    sphereTitle:"à¸¥à¸¹à¸à¹à¸à¹‰à¸§à¸à¸¥à¸±à¸‡à¸§à¸´à¸à¸à¸²à¸“",
    chartTitle:"à¹€à¸£à¸”à¸²à¸£à¹Œà¸ªà¸¡à¸”à¸¸à¸¥à¸˜à¸²à¸•à¸¸à¸—à¸±à¹‰à¸‡à¸«à¹‰à¸²",
    reportTitle:"à¸£à¸²à¸¢à¸‡à¸²à¸™à¸”à¸§à¸‡à¸à¸²à¸£à¸‡à¸²à¸™à¹à¸¥à¸°à¸˜à¸¸à¸£à¸à¸´à¸ˆ à¸›à¸µ 2026",
btnPrint:"à¸à¸´à¸¡à¸à¹Œà¸£à¸²à¸¢à¸‡à¸²à¸™",
    extraTitle:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸à¸´à¹ˆà¸¡à¸›à¸µ 2026 (à¹„à¸¡à¹ˆà¸šà¸±à¸‡à¸„à¸±à¸š) â€” à¹€à¸à¸·à¹ˆà¸­à¸„à¸³à¹à¸™à¸°à¸™à¸³à¸—à¸µà¹ˆà¸Šà¸±à¸”à¸‚à¸¶à¹‰à¸™",
            focusOpts:{"growth": "à¸‚à¸¢à¸²à¸¢(à¸ªà¹€à¸à¸¥à¸­à¸±à¸›)", "setup": "à¸§à¸²à¸‡à¸£à¸°à¸šà¸š/à¸à¸·à¹‰à¸™à¸à¸²à¸™", "cleanup": "à¸ˆà¸±à¸”à¸£à¸°à¹€à¸šà¸µà¸¢à¸š/à¸šà¸£à¸´à¸«à¸²à¸£à¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¹ˆà¸¢à¸‡"},
roleOpts:{"biz": "à¹€à¸ˆà¹‰à¸²à¸‚à¸­à¸‡/à¸˜à¸¸à¸£à¸à¸´à¸ˆ", "job": "à¸à¸™à¸±à¸à¸‡à¸²à¸™/à¸«à¸±à¸§à¸«à¸™à¹‰à¸²", "switch": "à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸‡à¸²à¸™/à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ªà¸²à¸¢", "start": "à¹€à¸•à¸£à¸µà¸¢à¸¡à¹€à¸£à¸´à¹ˆà¸¡à¸˜à¸¸à¸£à¸à¸´à¸ˆ"},
goalLabel:"à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢à¸«à¸¥à¸±à¸à¸›à¸µ 2026 (à¹€à¸¥à¸·à¸­à¸à¹„à¸”à¹‰à¸«à¸¥à¸²à¸¢à¸‚à¹‰à¸­)",
    riskLabelTitle:"à¸ªà¹„à¸•à¸¥à¹Œà¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¹ˆà¸¢à¸‡",
    worryLabel:"à¸à¸±à¸‡à¸§à¸¥à¸—à¸µà¹ˆà¸ªà¸¸à¸”à¸•à¸­à¸™à¸™à¸µà¹‰ (à¸«à¸™à¸¶à¹ˆà¸‡à¸šà¸£à¸£à¸—à¸±à¸”)",
        worryPlaceholder:"à¹€à¸Šà¹ˆà¸™ à¸‚à¸¢à¸²à¸¢à¸¥à¸¹à¸à¸„à¹‰à¸²à¹ƒà¸«à¸¡à¹ˆ / à¸à¸£à¸°à¹à¸ªà¹€à¸‡à¸´à¸™à¸ªà¸” / à¸à¸²à¸£à¹Œà¸—à¹€à¸™à¸­à¸£à¹Œ / à¸ªà¸¸à¸‚à¸ à¸²à¸à¹à¸¥à¸°à¸§à¸´à¸™à¸±à¸¢",
extraHint:"â€» à¹ƒà¸Šà¹‰à¹€à¸à¸·à¹ˆà¸­à¸—à¸³à¹„à¸—à¸¡à¹Œà¹„à¸¥à¸™à¹Œ â€˜à¸—à¸³à¸­à¸°à¹„à¸£à¹€à¸¡à¸·à¹ˆà¸­à¹„à¸«à¸£à¹ˆâ€™ à¹ƒà¸«à¹‰à¸ªà¸¡à¸ˆà¸£à¸´à¸‡à¸‚à¸¶à¹‰à¸™à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™", 
    alertMissingDate:"à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸§à¸±à¸™ à¹€à¸”à¸·à¸­à¸™ à¸›à¸µà¹€à¸à¸´à¸”à¹ƒà¸«à¹‰à¸„à¸£à¸š"
  },
  id:{
    headerTitle:"Laporan Strategi 2026<br>Saju Ã— 16 Tipe Kepribadian",
    headerSubtitle:"Menggabungkan saju Korea dengan 16 tipe MBTI dalam gaya K-POP untuk karier & bisnis",
    inputTitle:"Masukkan data",
    namePlaceholder:"Nama (contoh: Andi) - termasuk analisis nama",
    yearPlaceholder:"Tahun lahir (mis: 1992)",
    monthDefault:"Bulan",
    dayDefault:"Hari",
    hourUnknown:"Tidak tahu jam lahir (akurasi menurun)",
    mbtiLabel:"16 tipe kepribadian (berbasis MBTI)",
        aiCreativeLabel:"Aktifkan mode AI Creative (saran lebih jujur & personal)",
btnStart:"Mulai analisis detail",
    btnRetry:"Analisis orang lain",
    loading:"Menghitung batang langit, cabang bumi, dan keseimbangan lima unsur...",
    pillarTitle:"Diagram Saju (Empat Pilar)",
    sphereTitle:"Bola energi jiwa",
    chartTitle:"Radar keseimbangan lima unsur",
    reportTitle:"Laporan peruntungan karier & bisnis 2026",
btnPrint:"Cetak laporan",
    extraTitle:"Data tambahan 2026 (opsional) â€” untuk saran lebih spesifik",
            focusOpts:{"growth": "Ekspansi (scale up)", "setup": "Fondasi/sistem", "cleanup": "Rapikan/manajemen risiko"},
roleOpts:{"biz": "Bisnis/Pemilik", "job": "Karyawan/Lead", "switch": "Pindah/Transisi", "start": "Persiapan usaha"},
goalLabel:"Target utama 2026 (boleh pilih banyak)",
    riskLabelTitle:"Kecenderungan risiko",
    worryLabel:"Kekhawatiran terbesar saat ini (1 kalimat)",
        worryPlaceholder:"Contoh: tambah pelanggan / arus kas / kemitraan / rutinitas kesehatan",
extraHint:"â€» Hanya dipakai untuk membuat timeline â€˜kapan melakukan apaâ€™ lebih realistis.", 
    alertMissingDate:"Silakan isi tahun, bulan, dan tanggal lahir."
  }

  ,en:{
    headerTitle:"2026 Saju Ã— 16 Types<br>Winning Strategy Report for Work & Business",
    headerSubtitle:"A K-POP styled global fortune engine combining Korean-style Saju (Four Pillars) with MBTI-based 16 types",
    inputTitle:"Enter your info",
    namePlaceholder:"Name (e.g., Alex Kim) - includes name reading",
    yearPlaceholder:"Birth year (e.g., 1992)",
    monthDefault:"Month",
    dayDefault:"Day",
    hourUnknown:"Time unknown (lower accuracy)",
    mbtiLabel:"Personality type (MBTI-based 16 types)",
        aiCreativeLabel:"Enable AI Creative mode (adds more honest, personal advice)",
btnStart:"Start precise reading",
    btnRetry:"Analyze another person",
    loading:"Setting stems/branches and tuning Five-Element balance...",
    pillarTitle:"Four Pillars (Saju)",
    sphereTitle:"My Soul Sphere",
    chartTitle:"Five-Element Balance Radar",
    reportTitle:"2026 Work & Business Strategy Report",
    btnPrint:"Print report",
    extraTitle:"2026 Extra Inputs (Optional) â€” for more specific advice",
            focusOpts:{"growth": "Expansion (scale-up)", "setup": "Foundation/system", "cleanup": "Cleanup/risk management"},
roleOpts:{"biz": "Business/Owner", "job": "Employee/Lead", "switch": "Career change", "start": "Preparing to start a business"},
goalLabel:"Key goals for 2026 (multi-select)",
    riskLabelTitle:"Risk tendency",
    worryLabel:"Your biggest concern right now (one line)",
        worryPlaceholder:"e.g., new clients / cash flow / partnerships / health routine",
extraHint:"â€» These are used only to make the 'when/what to do' timeline more realistic.",
    alertMissingDate:"Please enter birth year, month, and day."
  }

};

// ê´‘ê³  í…ìŠ¤íŠ¸
const AD_TEXTS = {
  ko:{
    text:"ì´ê³³ì€ ê´‘ê³  ì˜ì—­ì…ë‹ˆë‹¤. ì¶”í›„ ì‹¤ì œ ê´‘ê³ ê°€ ë…¸ì¶œë©ë‹ˆë‹¤.",
    inquiry:"ê´‘ê³ ë¬¸ì˜: daezhobiz@gmail.com"
  },
  ja:{
    text:"ã“ã“ã¯åºƒå‘Šã‚¹ãƒšãƒ¼ã‚¹ã§ã™ã€‚ä»Šå¾Œã€æœ¬ç‰©ã®åºƒå‘ŠãŒæ²è¼‰ã•ã‚Œã¾ã™ã€‚",
    inquiry:"åºƒå‘Šæ²è¼‰ã®ãŠå•ã„åˆã‚ã›: daezhobiz@gmail.com"
  },
  th:{
    text:"à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¹‚à¸†à¸©à¸“à¸² à¸‚à¸“à¸°à¸™à¸µà¹‰à¹€à¸›à¹‡à¸™à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™",
    inquiry:"à¸•à¸´à¸”à¸•à¹ˆà¸­à¹‚à¸†à¸©à¸“à¸²: daezhobiz@gmail.com"
  },
  id:{
    text:"Ruang iklan. Saat ini masih teks contoh.",
    inquiry:"Kontak iklan: daezhobiz@gmail.com"
  },
  en:{
    text:"Ad space. Real ads will appear here later.",
    inquiry:"Ad inquiry: daezhobiz@gmail.com"
  }
};

// MBTI íŠ¹ì„± í…ìŠ¤íŠ¸
const MBTI_TRAITS = {
  ko:{
    E:"ì™¸í–¥(E) â€“ ì‚¬ëŒ, í˜„ì¥, ì¦‰í¥ì ì¸ ë§Œë‚¨ì—ì„œ ì—ë„ˆì§€ë¥¼ ì–»ìŒ",
    I:"ë‚´í–¥(I) â€“ í˜¼ì ì •ë¦¬Â·ì—°êµ¬Â·ê¸°íší•˜ë©´ì„œ ì—ë„ˆì§€ë¥¼ ì¶©ì „",
    S:"ê°ê°(S) â€“ ë°ì´í„°, ë£¨í‹´, í˜„ì‹¤ì— ê°•í•¨",
    N:"ì§ê´€(N) â€“ ì•„ì´ë””ì–´, íŠ¸ë Œë“œ, í° ê·¸ë¦¼ì— ê°•í•¨",
    T:"ì‚¬ê³ (T) â€“ ë…¼ë¦¬Â·ì„±ê³¼ ì¤‘ì‹¬ìœ¼ë¡œ ê²°ì •",
    F:"ê°ì •(F) â€“ ê´€ê³„Â·ë¶„ìœ„ê¸°Â·ì‚¬ëŒì˜ ë§ˆìŒì„ ìš°ì„ ",
    J:"íŒë‹¨(J) â€“ ê³„íš, ë§ˆê°, ì‹œìŠ¤í…œì— ê°•í•¨",
    P:"ì¸ì‹(P) â€“ ìœ ì—°ì„±, ì¦‰í¥ì„±, ë³€í™” ëŒ€ì‘ì— ê°•í•¨"
  },
  ja:{
    E:"å¤–å‘(E) â€“ äººã¨ã®äº¤æµã‚„ç¾å ´ã§ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å¾—ã‚‹ã‚¿ã‚¤ãƒ—",
    I:"å†…å‘(I) â€“ ä¸€äººã§è€ƒãˆãŸã‚Šæ•´ç†ã™ã‚‹æ™‚é–“ã§å……é›»ã™ã‚‹ã‚¿ã‚¤ãƒ—",
    S:"æ„Ÿè¦š(S) â€“ ãƒ‡ãƒ¼ã‚¿ã‚„ç¾å®Ÿçš„ãªäº‹å®Ÿã«å¼·ã„",
    N:"ç›´è¦³(N) â€“ ã‚¢ã‚¤ãƒ‡ã‚¢ã‚„ã‚³ãƒ³ã‚»ãƒ—ãƒˆã€æœªæ¥åƒã«å¼·ã„",
    T:"æ€è€ƒ(T) â€“ è«–ç†ã¨çµæœã‚’é‡è¦–ã—ã¦åˆ¤æ–­",
    F:"æ„Ÿæƒ…(F) â€“ äººé–“é–¢ä¿‚ã¨é›°å›²æ°—ã‚’é‡è¦–ã—ã¦åˆ¤æ–­",
    J:"åˆ¤æ–­(J) â€“ è¨ˆç”»ã¨ç· åˆ‡ã€æ§‹é€ ã‚’å¥½ã‚€",
    P:"çŸ¥è¦š(P) â€“ å¤‰åŒ–ã¨æŸ”è»Ÿæ€§ã€é¸æŠè‚¢ã®å¤šã•ã‚’å¥½ã‚€"
  },
  th:{
    E:"E â€“ à¸ªà¸²à¸¢à¸­à¸­à¸à¸™à¸­à¸à¸šà¹‰à¸²à¸™ à¸Šà¸­à¸šà¸à¸šà¸„à¸™ à¸à¸¥à¸±à¸‡à¸¡à¸²à¸ˆà¸²à¸à¸à¸²à¸£à¹€à¸„à¸¥à¸·à¹ˆà¸­à¸™à¹„à¸«à¸§",
    I:"I â€“ à¸ªà¸²à¸¢à¸­à¸´à¸™à¹‚à¸—à¸£à¹€à¸§à¸´à¸£à¹Œà¸• à¸Šà¸²à¸£à¹Œà¸ˆà¸à¸¥à¸±à¸‡à¹€à¸§à¸¥à¸²à¹„à¸”à¹‰à¸­à¸¢à¸¹à¹ˆà¸à¸±à¸šà¸•à¸±à¸§à¹€à¸­à¸‡",
    S:"S â€“ à¹‚à¸Ÿà¸à¸±à¸ªà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸£à¸´à¸‡ à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™ à¹à¸¥à¸°à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸ˆà¸±à¸šà¸•à¹‰à¸­à¸‡à¹„à¸”à¹‰",
    N:"N â€“ à¹‚à¸Ÿà¸à¸±à¸ªà¹„à¸­à¹€à¸”à¸µà¸¢ à¸ à¸²à¸à¹ƒà¸«à¸à¹ˆ à¹à¸¥à¸°à¸„à¸§à¸²à¸¡à¹€à¸›à¹‡à¸™à¹„à¸›à¹„à¸”à¹‰à¹ƒà¸«à¸¡à¹ˆà¹†",
    T:"T â€“ à¸•à¸±à¸”à¸ªà¸´à¸™à¹ƒà¸ˆà¸”à¹‰à¸§à¸¢à¹€à¸«à¸•à¸¸à¸œà¸¥à¹à¸¥à¸°à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ",
    F:"F â€“ à¸•à¸±à¸”à¸ªà¸´à¸™à¹ƒà¸ˆà¹‚à¸”à¸¢à¸„à¸³à¸™à¸¶à¸‡à¸–à¸¶à¸‡à¸„à¸§à¸²à¸¡à¸£à¸¹à¹‰à¸ªà¸¶à¸à¹à¸¥à¸°à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ",
    J:"J â€“ à¸Šà¸­à¸šà¹à¸œà¸™ à¸•à¸²à¸£à¸²à¸‡ à¹à¸¥à¸°à¸„à¸§à¸²à¸¡à¸Šà¸±à¸”à¹€à¸ˆà¸™",
    P:"P â€“ à¸Šà¸­à¸šà¸„à¸§à¸²à¸¡à¸¢à¸·à¸”à¸«à¸¢à¸¸à¹ˆà¸™ à¸›à¸£à¸±à¸šà¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸•à¸²à¸¡à¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œ"
  },
  id:{
    E:"E â€“ Ekstrovert, mengisi energi lewat orang dan aktivitas luar",
    I:"I â€“ Introvert, mengisi energi lewat waktu sendiri dan fokus",
    S:"S â€“ Sensing, kuat di data, detail, dan realitas",
    N:"N â€“ Intuitive, kuat di ide, konsep, dan visi besar",
    T:"T â€“ Thinking, memutuskan dengan logika dan hasil",
    F:"F â€“ Feeling, memutuskan dengan empati dan relasi",
    J:"J â€“ Judging, suka rencana, struktur, dan tenggat waktu",
    P:"P â€“ Perceiving, suka fleksibel dan spontan"
  }

  ,en:{
    E:"E â€“ Extraverted: gains energy from people, action, and the field",
    I:"I â€“ Introverted: recharges by thinking, planning, and solo focus",
    S:"S â€“ Sensing: strong with data, routines, and reality checks",
    N:"N â€“ Intuitive: strong with ideas, trends, and big-picture vision",
    T:"T â€“ Thinking: decides with logic and outcomes",
    F:"F â€“ Feeling: decides with empathy and relationship context",
    J:"J â€“ Judging: strong with plans, deadlines, and systems",
    P:"P â€“ Perceiving: strong with flexibility and adapting to change"
  }

};

// ëœë¤ ìœ í‹¸
function pickRandom(arr){
  return arr[Math.floor(Math.random()*arr.length)];
}
function pickRandomN(arr,n){
  const copy=[...arr];
  const result=[];
  for(let i=0;i<n && copy.length>0;i++){
    const idx=Math.floor(Math.random()*copy.length);
    result.push(copy[idx]);
    copy.splice(idx,1);
  }
  return result;
}

// ë¸Œë¼ìš°ì € ì–¸ì–´ ê°ì§€
function detectBrowserLang(){
  try{
    const n=(navigator.language||navigator.userLanguage||"en").toLowerCase();
    const c=n.slice(0,2);
    if(["ko","ja","th","id","en"].includes(c)) return c;
    return "en";
  }catch(e){return "en";}
}

// ê´‘ê³  í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
function updateAdTexts(){
  const lang = AD_TEXTS[currentLang] ? currentLang : "ko";
  const ad = AD_TEXTS[lang];
  const hText=document.getElementById("adHomeText");
  const hEmail=document.getElementById("adHomeEmail");
  const rText=document.getElementById("adResultText");
  const rEmail=document.getElementById("adResultEmail");
  if(hText) hText.innerText = ad.text;
  if(hEmail) hEmail.innerText = ad.inquiry;
  if(rText) rText.innerText = ad.text;
  if(rEmail) rEmail.innerText = ad.inquiry;
}

// ì‹œê°„ ì˜µì…˜ ìƒì„±
function buildHourOptions(lang){
  const hourSel=document.getElementById("hour");
  if(!hourSel) return;
  const old=hourSel.value;
  const t=TEXTS[lang]||TEXTS.ko;
  const labels=HOUR_LABELS[lang]||HOUR_LABELS.ko;

  hourSel.innerHTML="";
  const opt0=document.createElement("option");
  opt0.value="";
  opt0.textContent=t.hourUnknown;
  hourSel.appendChild(opt0);
  labels.forEach((lab,i)=>{
    const o=document.createElement("option");
    o.value=i;
    o.textContent=lab;
    hourSel.appendChild(o);
  });
  if(old!=="") hourSel.value=old;
}

// ì–¸ì–´ ë³€ê²½
function setLanguage(lang){
  currentLang=lang;
  const t=TEXTS[lang]||TEXTS.ko;

  document.getElementById("headerTitle").innerHTML=t.headerTitle;
  document.getElementById("headerSubtitle").innerText=t.headerSubtitle;
  document.getElementById("inputTitle").innerText=t.inputTitle;
  document.getElementById("name").placeholder=t.namePlaceholder;
  document.getElementById("year").placeholder=t.yearPlaceholder;
  const mSel=document.getElementById("month");
  const dSel=document.getElementById("day");
  if(mSel && mSel.options.length>0) mSel.options[0].text=t.monthDefault;
  if(dSel && dSel.options.length>0) dSel.options[0].text=t.dayDefault;
  document.getElementById("mbtiLabel").innerText=t.mbtiLabel;
  document.getElementById("btnStart").innerHTML=`<i class="fa-solid fa-wand-magic-sparkles"></i><span>${t.btnStart}</span>`;
  document.getElementById("btnRetry").innerHTML=`<i class="fa-solid fa-rotate-left"></i><span>${t.btnRetry}</span>`;
  document.getElementById("loadingText").innerText=t.loading;
  document.getElementById("pillarTitle").innerText=t.pillarTitle;
  document.getElementById("sphereTitle").innerText=t.sphereTitle;
  document.getElementById("chartTitle").innerText=t.chartTitle;
  // extra inputs & print
  const extraTitleEl=document.getElementById("extraTitle");
  if(extraTitleEl) extraTitleEl.innerText = t.extraTitle || "2026 ì¶”ê°€ ë°ì´í„° (ì„ íƒ) â€” ë” êµ¬ì²´í•œ ì¡°ì–¸ìš©";
  const goalLabelEl=document.getElementById("goalLabel");
  if(goalLabelEl) goalLabelEl.innerText = t.goalLabel || "2026 í•µì‹¬ ëª©í‘œ (ë³µìˆ˜ ì„ íƒ)";
  const riskLabelTitleEl=document.getElementById("riskLabelTitle");
  if(riskLabelTitleEl) riskLabelTitleEl.innerText = t.riskLabelTitle || "ë¦¬ìŠ¤í¬ ì„±í–¥";
  const worryLabelEl=document.getElementById("worryLabel");
  if(worryLabelEl) worryLabelEl.innerText = t.worryLabel || "ì§€ê¸ˆ ê°€ì¥ í° ê³ ë¯¼ (í•œ ì¤„)";
  const extraHintEl=document.getElementById("extraHint");
  if(extraHintEl) extraHintEl.innerText = t.extraHint || "â€» ì´ í•­ëª©ë“¤ì€ íƒ€ì„ë¼ì¸ì„ ë” í˜„ì‹¤ì ìœ¼ë¡œ ë§Œë“œëŠ” ë°ë§Œ ì‚¬ìš©ë¼ìš”.";
  const btnPrintEl=document.getElementById("btnPrint");
  if(btnPrintEl) btnPrintEl.innerHTML = `<i class="fa-solid fa-print"></i><span>${t.btnPrint||"Print"}</span>`;


  // AI Creative label
  const aiCreativeLabelEl = document.getElementById("aiCreativeLabelText");
  if(aiCreativeLabelEl) aiCreativeLabelEl.innerText = t.aiCreativeLabel || aiCreativeLabelEl.innerText;

  // worry placeholder
  const worryEl = document.getElementById("worry");
  if(worryEl) worryEl.placeholder = t.worryPlaceholder || worryEl.placeholder;

  // role/focus option labels
  const roleSel = document.getElementById("role2026");
  if(roleSel && t.roleOpts){
    Array.from(roleSel.options).forEach(o=>{
      if(t.roleOpts[o.value]) o.textContent = t.roleOpts[o.value];
    });
  }
  const focusSel = document.getElementById("focus2026");
  if(focusSel && t.focusOpts){
    Array.from(focusSel.options).forEach(o=>{
      if(t.focusOpts[o.value]) o.textContent = t.focusOpts[o.value];
    });
  }

  initGoalChips();
  buildHourOptions(lang);
  updateAdTexts();
}

// ì‚¬ì£¼ ê³„ì‚°
function getSaju(y,m,d,h=-1){
  // 1) Prefer high-accuracy library (ì ˆê¸°/íŒ”ì) if available
  try{
    if(typeof Solar !== "undefined" && Solar && typeof Solar.fromYmd === "function"){
      const solar = (h>=0 && typeof Solar.fromYmdHms === "function")
        ? Solar.fromYmdHms(y,m,d,h,0,0)
        : Solar.fromYmd(y,m,d);

      const lunar = solar.getLunar();
      const ec = (lunar && typeof lunar.getEightChar === "function") ? lunar.getEightChar() : null;

      if(ec){
        const yearP = {g: ec.getYearGan(),  j: ec.getYearZhi()};
        const monthP= {g: ec.getMonthGan(), j: ec.getMonthZhi()};
        const dayP  = {g: ec.getDayGan(),   j: ec.getDayZhi()};
        const hourP = (h>=0 && typeof ec.getTimeGan === "function")
          ? {g: ec.getTimeGan(), j: ec.getTimeZhi()}
          : null;

        // ì•ˆì „ì¥ì¹˜(ê°€ë” ê°„ì§€ê°€ í•œê¸€/í•œì í˜¼ìš©ì¼ ìˆ˜ ìˆìŒ)
        if(ELEM[yearP.g] && ELEM[monthP.g] && ELEM[dayP.g]){
          return {year:yearP, month:monthP, day:dayP, hour:hourP};
        }
      }
    }
  }catch(e){
    // fallback below
  }

  // 2) Fallback (ë‹¨ìˆœ ê³„ì‚°): ì—°/ì›”/ì‹œëŠ” ìµœëŒ€í•œ ì •êµí™”, ì¼ì£¼ëŠ” ê·¼ì‚¬
  // - ì—°ì£¼: ì…ì¶˜(ëŒ€ëµ 2/4) ê¸°ì¤€ ë³´ì •
  const isLeap=(y%4===0 && (y%100!==0||y%400===0));
  const daysToMonth=[0,31,59,90,120,151,181,212,243,273,304,334];
  let dayOfYear=daysToMonth[m-1]+d+(m>2 && isLeap?1:0);

  const lichunApprox=35; // ëŒ€ëµ ì…ì¶˜(2/4=35ì¼ì°¨)
  let yAdj=y;
  if(m===1 || (m===2 && dayOfYear<lichunApprox)) yAdj=y-1;

  let yG=(yAdj-4)%10; if(yG<0)yG+=10;
  let yJ=(yAdj-4)%12; if(yJ<0)yJ+=12;

  // - ì›”ì§€: ì ˆê¸° ê¸°ì¤€ (ëŒ€ëµ) 2ì›”=å¯… ì‹œì‘
  const monthBranchIndex = (() => {
    if(m===2 && dayOfYear>=lichunApprox) return 2; // å¯…
    if(m===2 && dayOfYear<lichunApprox) return 1;  // ä¸‘
    if(m===3) return 3;
    if(m===4) return 4;
    if(m===5) return 5;
    if(m===6) return 6;
    if(m===7) return 7;
    if(m===8) return 8;
    if(m===9) return 9;
    if(m===10) return 10;
    if(m===11) return 11;
    if(m===12) return 0; // å­
    return 1; // 1ì›”=ä¸‘
  })();

  // - ì›”ê°„: ì—°ê°„ì— ë”°ë¼ å¯…ì›” ì‹œì‘ ê°„ì´ ê·œì¹™
  const startStemForY = (() => {
    const idx = yG;
    if(idx===0 || idx===5) return 2; // ç”²/å·± -> ä¸™å¯…
    if(idx===1 || idx===6) return 4; // ä¹™/åºš -> æˆŠå¯…
    if(idx===2 || idx===7) return 6; // ä¸™/è¾› -> åºšå¯…
    if(idx===3 || idx===8) return 8; // ä¸/å£¬ -> å£¬å¯…
    return 0; // æˆŠ/ç™¸ -> ç”²å¯…
  })();
  const offsetFromYin = (monthBranchIndex - 2 + 12) % 12;
  const mG = (startStemForY + offsetFromYin) % 10;
  const mJ = monthBranchIndex;

  // - ì¼ì£¼(ê·¼ì‚¬): 1900-01-31 ê¸°ì¤€(ë‚´ë¶€ ê¸°ì¤€ì¼) ì‚¬ìš©
  const base1900=new Date(1900,0,31);
  const target=new Date(y,m-1,d);
  let days=Math.floor((target-base1900)/86400000);
  let dG=days%10; let dJ=days%12;
  if(dG<0)dG+=10; if(dJ<0)dJ+=12;

  // - ì‹œì§€: ì…ë ¥ ì„ íƒ(ì~í•´), ì‹œê°„ ë¯¸ì…ë ¥ ì‹œ null
  let hourP=null;
  if(h>=0){
    const hJ=h;
    // ì‹œê°ì˜ ì²œê°„ì€ ì¼ê°„ì— ë”°ë¼ å­ì‹œ ì‹œì‘ ê°„ì´ ê·œì¹™
    const startStemForD = (() => {
      const idx=dG;
      if(idx===0 || idx===5) return 0; // ç”²/å·± -> ç”²å­
      if(idx===1 || idx===6) return 2; // ä¹™/åºš -> ä¸™å­
      if(idx===2 || idx===7) return 4; // ä¸™/è¾› -> æˆŠå­
      if(idx===3 || idx===8) return 6; // ä¸/å£¬ -> åºšå­
      return 8; // æˆŠ/ç™¸ -> å£¬å­
    })();
    const hG=(startStemForD + hJ) % 10;
    hourP={g:GAN[hG],j:JI[hJ]};
  }

  return {
    year:{g:GAN[yG],j:JI[yJ]},
    month:{g:GAN[mG],j:JI[mJ]},
    day:{g:GAN[dG],j:JI[dJ]},
    hour:hourP
  };
}

// ì˜¤í–‰ ì ìˆ˜
function calcScore(s){
  let sc={ëª©:0,í™”:0,í† :0,ê¸ˆ:0,ìˆ˜:0};
  const dayE=ELEM[s.day.g];
  [s.year,s.month,s.day,s.hour].filter(Boolean).forEach(p=>{
    sc[ELEM[p.g]] += (p.g===s.day.g?2:1);
  });
  const branchElem={ì:"ìˆ˜",ì¶•:"í† ",ì¸:"ëª©",ë¬˜:"ëª©",ì§„:"í† ",ì‚¬:"í™”",ì˜¤:"í™”",ë¯¸:"í† ",ì‹ :"ê¸ˆ",ìœ :"ê¸ˆ",ìˆ :"í† ",í•´:"ìˆ˜"}[s.day.j];
  sc[branchElem]+=2;

  const seq=["ëª©","í™”","í† ","ê¸ˆ","ìˆ˜"];
  const idx=seq.indexOf(dayE);
  sc[seq[(idx+1)%5]]+=1;
  sc[seq[(idx+2)%5]]+=0.5;
  return sc;
}

// ì°¨íŠ¸
let chartInstance=null;
function renderChart(score,lang){
  const labelsMap={
    ko:["ëª©(æœ¨)","í™”(ç«)","í† (åœŸ)","ê¸ˆ(é‡‘)","ìˆ˜(æ°´)"],
    ja:["æœ¨","ç«","åœŸ","é‡‘","æ°´"],
    th:["à¹„à¸¡à¹‰","à¹„à¸Ÿ","à¸”à¸´à¸™","à¹‚à¸¥à¸«à¸°","à¸™à¹‰à¸³"],
    id:["Kayu","Api","Tanah","Logam","Air"]
  };
  const labels=labelsMap[lang]||labelsMap.ko;
  const data=[score.ëª©,score.í™”,score.í† ,score.ê¸ˆ,score.ìˆ˜];
  const maxVal=Math.max(...data,5);
  const ctx=document.getElementById("elemChart").getContext("2d");
  if(chartInstance) chartInstance.destroy();
  chartInstance=new Chart(ctx,{
    type:"radar",
    data:{labels,
      datasets:[{
        data,
        fill:true,
        borderColor:"#a855f7",
        backgroundColor:"rgba(168,85,247,0.18)",
        pointBackgroundColor:"#22d3ee",
        borderWidth:2,
        pointRadius:4
      }]
    },
    options:{
      scales:{
        r:{
          angleLines:{color:"rgba(148,163,184,0.25)"},
          grid:{color:"rgba(30,64,175,0.45)"},
          pointLabels:{
            color:"#e5e7eb",
            font:{size:12,weight:"600",family:"Poppins"}
          },
          suggestedMin:0,
          suggestedMax:maxVal
        }
      },
      plugins:{legend:{display:false}}
    }
  });
}

// 3D êµ¬ì²´
function renderSoulSphere(dayElem,score){
  const container=document.getElementById("soulSphere");
  container.innerHTML="";
  const w=container.clientWidth;
  const h=container.clientHeight;
  const scene=new THREE.Scene();
  const camera=new THREE.PerspectiveCamera(45,w/h,0.1,1000);
  camera.position.z=3;

  const renderer=new THREE.WebGLRenderer({antialias:true,alpha:true});
  renderer.setSize(w,h);
  renderer.setPixelRatio(window.devicePixelRatio||1);
  container.appendChild(renderer.domElement);

  const elemColor={ëª©:0x22c55e,í™”:0xf97316,í† :0xfacc15,ê¸ˆ:0x38bdf8,ìˆ˜:0x6366f1}[dayElem]||0xffffff;

  const geom=new THREE.SphereGeometry(1,64,64);
  const mat=new THREE.MeshStandardMaterial({
    color:elemColor,
    metalness:.6,
    roughness:.25,
    emissive:elemColor,
    emissiveIntensity:.25
  });
  const sphere=new THREE.Mesh(geom,mat);
  scene.add(sphere);

  const wireGeom=new THREE.SphereGeometry(1.02,26,18);
  const wireMat=new THREE.MeshBasicMaterial({color:0xffffff,wireframe:true,transparent:true,opacity:.3});
  const wire=new THREE.Mesh(wireGeom,wireMat);
  scene.add(wire);

  scene.add(new THREE.AmbientLight(0xffffff,.6));
  const light=new THREE.PointLight(0xffffff,1.4);
  light.position.set(2,3,4);
  scene.add(light);

  const base=(score.ëª©+score.í™”+score.í† +score.ê¸ˆ+score.ìˆ˜)/5;
  const s=1+base/20;
  sphere.scale.set(s,s,s);

  function animate(){
    requestAnimationFrame(animate);
    sphere.rotation.y+=0.005;
    wire.rotation.y-=0.003;
    renderer.render(scene,camera);
  }
  animate();
}

// ì˜¤í–‰ ì„¤ëª…
function renderElemDesc(score,lang){
  const sorted=Object.entries(score).sort((a,b)=>b[1]-a[1]);
  const maxElem=sorted[0][0];
  const minElem=sorted[sorted.length-1][0];

  const names={
    ko:{ëª©:"ëª©(æœ¨)",í™”:"í™”(ç«)",í† :"í† (åœŸ)",ê¸ˆ:"ê¸ˆ(é‡‘)",ìˆ˜:"ìˆ˜(æ°´)"},
    ja:{ëª©:"æœ¨",í™”:"ç«",í† :"åœŸ",ê¸ˆ:"é‡‘",ìˆ˜:"æ°´"},
    th:{ëª©:"à¸˜à¸²à¸•à¸¸à¹„à¸¡à¹‰",í™”:"à¸˜à¸²à¸•à¸¸à¹„à¸Ÿ",í† :"à¸˜à¸²à¸•à¸¸à¸”à¸´à¸™",ê¸ˆ:"à¸˜à¸²à¸•à¸¸à¹‚à¸¥à¸«à¸°",ìˆ˜:"à¸˜à¸²à¸•à¸¸à¸™à¹‰à¸³"},
    id:{ëª©:"unsur Kayu",í™”:"unsur Api",í† :"unsur Tanah",ê¸ˆ:"unsur Logam",ìˆ˜:"unsur Air"},
    en:{ëª©:"Wood",í™”:"Fire",í† :"Earth",ê¸ˆ:"Metal",ìˆ˜:"Water"}
  }[lang]||{ëª©:"ëª©(æœ¨)",í™”:"í™”(ç«)",í† :"í† (åœŸ)",ê¸ˆ:"ê¸ˆ(é‡‘)",ìˆ˜:"ìˆ˜(æ°´)"};

  let text="";
  if(lang==="ko"){
    text=`<strong>ê°€ì¥ ê°•í•œ ê¸°ìš´:</strong> ${names[maxElem]} / <strong>ê°€ì¥ ì•½í•œ ê¸°ìš´:</strong> ${names[minElem]}<br>
    ê°•í•œ ê¸°ìš´ì€ ì˜¬í•´ ìì—°ìŠ¤ëŸ½ê²Œ <span class="highlight">ë°€ì–´ë¶™ì—¬ë„ ë˜ëŠ” ì˜ì—­</span>ì´ê³ , ì•½í•œ ê¸°ìš´ì€ ì‚¬ëŒÂ·ì‹œìŠ¤í…œÂ·ì™¸ì£¼ë¥¼ í†µí•´ ë³´ì™„í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.`;
  }else if(lang==="ja"){
    text=`<strong>æœ€ã‚‚å¼·ã„è¦ç´ :</strong> ${names[maxElem]} ï¼ <strong>æœ€ã‚‚å¼±ã„è¦ç´ :</strong> ${names[minElem]}<br>
    å¼·ã„è¦ç´ ã¯ä»Šå¹´ã‚ãªãŸãŒä¸»å½¹ã«ãªã‚Šã‚„ã™ã„åˆ†é‡ã€å¼±ã„è¦ç´ ã¯ä»²é–“ã‚„å°‚é–€å®¶ã«ä»»ã›ã‚‹ã¨æˆæœãŒå‡ºã‚„ã™ã„åˆ†é‡ã§ã™ã€‚`;
  }else if(lang==="th"){
    text=`<strong>à¸˜à¸²à¸•à¸¸à¸—à¸µà¹ˆà¹€à¸”à¹ˆà¸™à¸—à¸µà¹ˆà¸ªà¸¸à¸”:</strong> ${names[maxElem]} / <strong>à¸˜à¸²à¸•à¸¸à¸—à¸µà¹ˆà¸­à¹ˆà¸­à¸™à¸—à¸µà¹ˆà¸ªà¸¸à¸”:</strong> ${names[minElem]}<br>
    à¸˜à¸²à¸•à¸¸à¸—à¸µà¹ˆà¹€à¸”à¹ˆà¸™à¸„à¸·à¸­à¸à¸¥à¸±à¸‡à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¹à¸¥à¹‰à¸§à¸‡à¹ˆà¸²à¸¢à¹à¸¥à¸°à¹„à¸«à¸¥à¸¥à¸·à¹ˆà¸™ à¸ªà¹ˆà¸§à¸™à¸˜à¸²à¸•à¸¸à¸—à¸µà¹ˆà¸­à¹ˆà¸­à¸™à¸„à¸§à¸£à¹€à¸•à¸´à¸¡à¸”à¹‰à¸§à¸¢à¸—à¸µà¸¡ à¸£à¸°à¸šà¸š à¸«à¸£à¸·à¸­à¸œà¸¹à¹‰à¹€à¸Šà¸µà¹ˆà¸¢à¸§à¸Šà¸²à¸à¸ˆà¸°à¸”à¸µà¸—à¸µà¹ˆà¸ªà¸¸à¸”`;
  }else if(lang==="id"){
    text=`<strong>Unsur terkuat:</strong> ${names[maxElem]} / <strong>Unsur terlemah:</strong> ${names[minElem]}<br>
    Unsur yang kuat adalah area di mana Anda boleh bermain agresif. Unsur yang lemah lebih baik dilengkapi lewat tim, sistem, atau jasa profesional.`;
  }
  else if(lang==="en"){
    text=`<strong>Strongest element:</strong> ${names[maxElem]} / <strong>Weakest element:</strong> ${names[minElem]}<br>
    Your strongest element is where you can push naturally this year. Your weakest element is best reinforced via people, systems, or outsourcing.`;
  }
  document.getElementById("elemDesc").innerHTML=text;
}

// ì¼ê°„ ì„¤ëª…
function renderDayMasterDesc(dayGan,dayElem,lang){
  let text="";
  if(lang==="ko"){
    const map={
      ê°‘:"ê°‘ëª© ì¼ê°„ â€“ í° ë‚˜ë¬´, ì •ë©´ ëŒíŒŒí˜• ë¦¬ë”",
      ì„:"ì„ëª© ì¼ê°„ â€“ ë©êµ´ê³¼ ê½ƒ, ì„¬ì„¸í•œ ì„±ì¥í˜• ì „ëµê°€",
      ë³‘:"ë³‘í™” ì¼ê°„ â€“ íƒœì–‘, ì „ë©´ì—ì„œ ì´ë„ëŠ” ìŠ¤íƒ€í˜• ë¦¬ë”",
      ì •:"ì •í™” ì¼ê°„ â€“ ì´›ë¶ˆ, ë””í…Œì¼ê³¼ ê°ì„±ì˜ í¬ë¦¬ì—ì´í„°",
      ë¬´:"ë¬´í†  ì¼ê°„ â€“ í° ì‚°, ë²„í‹°ëŠ” ì±…ì„í˜• ê¸°ë‘¥",
      ê¸°:"ê¸°í†  ì¼ê°„ â€“ ë…¼ë°­, ì¡°ìœ¨ê³¼ ì„œí¬íŠ¸ì˜ í”„ë¡œì¡°ì •ê°€",
      ê²½:"ê²½ê¸ˆ ì¼ê°„ â€“ ê²€, ìŠ¹ë¶€ì™€ ê²°ë‹¨ì˜ ë”œë©”ì´ì»¤",
      ì‹ :"ì‹ ê¸ˆ ì¼ê°„ â€“ ë³´ì„, í€„ë¦¬í‹°ì™€ ë¸Œëœë”©ì˜ ì¥ì¸",
      ì„:"ì„ìˆ˜ ì¼ê°„ â€“ í° ë°”ë‹¤, ì •ë³´ì™€ ë„¤íŠ¸ì›Œí¬ì˜ í”Œë ˆì´ë©”ì´ì»¤",
      ê³„:"ê³„ìˆ˜ ì¼ê°„ â€“ ë¹„ì™€ ì•ˆê°œ, ê¸°íšê³¼ ì¸ì‚¬ì´íŠ¸ì˜ í”„ë¡œê¸°íšì"
    };
    const base=map[dayGan]||"";
    text=`<span class="highlight">${base}</span> ì— í•´ë‹¹í•©ë‹ˆë‹¤.  
    ì¦‰, ${dayElem==="ëª©"?"ì‚¬ëŒì„ í‚¤ìš°ê³  íŒì„ ë„“íˆëŠ” ë° ê°•ì ì´ ìˆê³ ":""
         || dayElem==="í™”"?"ì—´ì •ê³¼ ë“œë¼ì´ë¸Œ, ë¸Œëœë“œ íŒŒì›Œë¥¼ í‚¤ìš°ëŠ” ë° ê°•ì ì´ ìˆê³ ":""
         || dayElem==="í† "?"ì‹ ë¢°Â·ì±…ì„Â·ê¾¸ì¤€í•¨ìœ¼ë¡œ ìŠ¹ë¶€ë¥¼ ë³´ëŠ” íƒ€ì…ì´ê³ ":""
         || dayElem==="ê¸ˆ"?"ë¶„ì„Â·í˜‘ìƒÂ·ë§ˆê°ì—ì„œ ë‚ ì¹´ë¡œìš´ ê°•ì ì„ ê°€ì§€ë©°":""
         || dayElem==="ìˆ˜"?"ì •ë³´Â·íŠ¸ë Œë“œÂ·ìœ ì—°í•œ ì‚¬ê³ ì—ì„œ ê°•ì ì„ ê°€ì§€ë©°":""}
    2026ë…„ì—ëŠ” ì´ ê¸°ì§ˆì„ ë¹„ì¦ˆë‹ˆìŠ¤ì™€ ì»¤ë¦¬ì–´ ì „ëµì˜ ë©”ì¸ ë¬´ê¸°ë¡œ ì“°ë©´ ì¢‹ìŠµë‹ˆë‹¤.`;
  }else if(lang==="ja"){
    text=`ã‚ãªãŸã®ã€Œæ—¥å¹²ã€ã¯ <span class="highlight">${dayGan}</span> ã§ã€ä»Šå¹´ã®è»¸ã¨ãªã‚‹æ€§æ ¼ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’è¡¨ã—ã¾ã™ã€‚  
    ä»•äº‹ã§ã¯ã€ã“ã®æ—¥å¹²ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã«æ²¿ã£ãŸå½¹å‰²ã‚’æ„è­˜ã™ã‚‹ã¨ã€ãƒ ãƒªãªãæˆæœãŒå‡ºã‚„ã™ããªã‚Šã¾ã™ã€‚`;
  }else if(lang==="th"){
    text=`à¸˜à¸²à¸•à¸¸à¸§à¸±à¸™à¹€à¸à¸´à¸”à¸‚à¸­à¸‡à¸„à¸¸à¸“à¸„à¸·à¸­ <span class="highlight">${dayGan}</span> à¸‹à¸¶à¹ˆà¸‡à¹€à¸›à¹‡à¸™à¹à¸à¸™à¸šà¸¸à¸„à¸¥à¸´à¸à¸«à¸¥à¸±à¸à¹ƒà¸™à¸”à¸§à¸‡à¸™à¸µà¹‰  
    à¸–à¹‰à¸²à¹ƒà¸Šà¹‰à¸ªà¹„à¸•à¸¥à¹Œà¸™à¸µà¹‰à¹€à¸›à¹‡à¸™à¸ˆà¸¸à¸”à¹€à¸”à¹ˆà¸™à¸«à¸¥à¸±à¸à¹ƒà¸™à¸‡à¸²à¸™à¸«à¸£à¸·à¸­à¸˜à¸¸à¸£à¸à¸´à¸ˆ à¸ˆà¸°à¸£à¸¹à¹‰à¸ªà¸¶à¸à¹„à¸«à¸¥à¸¥à¸·à¹ˆà¸™à¹à¸¥à¸°à¹„à¸¡à¹ˆà¸à¸·à¸™à¸•à¸±à¸§à¹€à¸­à¸‡à¸ˆà¸™à¹€à¸à¸´à¸™à¹„à¸›`;
  }else if(lang==="id"){
    text=`Batang hari Anda adalah <span class="highlight">${dayGan}</span>, yaitu inti karakter dalam saju.  
    Saat karier dan bisnis mengikuti karakter alami ini, langkah Anda akan terasa lebih ringan dan konsisten.`;
  }
  document.getElementById("dayMasterDesc").innerHTML=text;
}

// MBTI ì„¤ëª… í…ìŠ¤íŠ¸
function getMbtiTraits(mbti,lang){
  const d=MBTI_TRAITS[lang]||MBTI_TRAITS.ko;
  const t=mbti.toUpperCase();
  return {
    ei:d[t[0]],
    ns:d[t[1]],
    tf:d[t[2]],
    jp:d[t[3]]
  };
}

// 2026 ë¦¬í¬íŠ¸ ìƒì„± (ê¸°ë³¸ ë²„ì „ â€“ êµ¬ì²´ì  ì¡°ì–¸ ê°•í™”)

// ================== 2026 êµ¬ì²´ ë¦¬ë”©ìš© ì¶”ê°€ ë°ì´í„°/ë¡œì§ ==================
function escapeHTML(str){
  return (str||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")
                 .replace(/"/g,"&quot;").replace(/'/g,"&#039;");
}

const MBTI_WEAK_KO = {
  INTJ:{weak:["ê³„íšì´ ì™„ë²½í•´ì•¼ ì‹œì‘(ì°©ìˆ˜ ì§€ì—°)","í‘œí˜„ì´ ì°¨ê°€ì›Œ ë³´ì¼ ìˆ˜ ìˆìŒ","í˜¼ì ë– ì•ˆê³  ë²ˆì•„ì›ƒ"], fix:["â€˜ì´ˆì•ˆ 60%â€™ì—ì„œ ë°”ë¡œ ì‹¤í–‰","ì£¼ 1íšŒ ê´€ê³„/ê°ì‚¬ í‘œí˜„ ë£¨í‹´","ì—…ë¬´ë¥¼ â€˜ì‚¬ëŒ/ì‹œìŠ¤í…œâ€™ìœ¼ë¡œ ë¶„í•´"]},
  INTP:{weak:["ì•„ì´ë””ì–´ê°€ ë§ì•„ ë§ˆë¬´ë¦¬ê°€ ì•½í•¨","í˜„ì‹¤ ì¼ì •/ì˜ˆì‚° ëˆ„ë½","ê´€ê³„ í”¼ë¡œë¡œ ì ìˆ˜"], fix:["â€˜ì´ë²ˆ ë‹¬ 1ê°œë§Œâ€™ ì›ì¹™","ì˜ˆì‚°/ì¼ì • ì²´í¬ë¦¬ìŠ¤íŠ¸ ê³ ì •","ì†Œí†µì€ ì§§ê³  ìì£¼(10ë¶„)"]},
  ENTJ:{weak:["ì†ë„ê°€ ë¹¨ë¼ ì£¼ë³€ì´ ë”°ë¼ì˜¤ê¸° í˜ë“¦","ë°€ì–´ë¶™ì´ë‹¤ ê´€ê³„ ë§ˆì°°","ê³¼ë„í•œ ë ˆë²„ë¦¬ì§€"], fix:["ê²°ì • ì „ì— â€˜ì´í•´ í™•ì¸â€™ 1ë¶„","ê¶Œí•œ ìœ„ì„+í”¼ë“œë°± ì£¼ê¸°","í° ë² íŒ…ì€ 2ë‹¨ê³„(í…ŒìŠ¤íŠ¸â†’í™•ì¥)"]},
  ENTP:{weak:["ìƒˆë¡œì›€ì— ëŒë ¤ ì§‘ì¤‘ ë¶„ì‚°","ë…¼ìŸìœ¼ë¡œ í”¼ë¡œ ëˆ„ì ","ë””í…Œì¼/ì •ì‚° ëˆ„ë½"], fix:["ìŠ¤í”„ë¦°íŠ¸(2ì£¼)ë¡œ ìª¼ê°œê¸°","ë…¼ìŸ ëŒ€ì‹  â€˜ì‹¤í—˜â€™ìœ¼ë¡œ íŒì •","ì •ì‚°/ê³„ì•½ì€ íŒŒíŠ¸ë„ˆì™€ 2ì¤‘ ì²´í¬"]},
  INFJ:{weak:["ê³¼ë„í•œ ì˜ë¯¸ë¶€ì—¬ë¡œ ë¶€ë‹´","ìƒëŒ€ ê¸°ë¶„ì„ ë– ì•ˆìŒ","ê²°ë‹¨ì„ ë¯¸ë£¸"], fix:["ê²°ì • ê¸°ì¤€ì„ â€˜3ê°œâ€™ë¡œ ì œí•œ","ê²½ê³„ì„ (ê°€ëŠ¥/ë¶ˆê°€) ë¬¸ì¥ ì—°ìŠµ","ë§ˆê°ì¼ì„ ê³µê°œ ì•½ì†"]},
  INFP:{weak:["ê°ì • ê¸°ë³µìœ¼ë¡œ ì‹¤í–‰ í”ë“¤ë¦¼","ê°ˆë“± íšŒí”¼ë¡œ ë¬¸ì œ ì¥ê¸°í™”","ì™„ë²½ì£¼ì˜ë¡œ í¬ê¸°"], fix:["ê°ì •ì´ ì•„ë‹ˆë¼ â€˜ì‹œê°„â€™ìœ¼ë¡œ ì‹¤í–‰","ë¬¸ì œëŠ” ì‘ê²Œ ìª¼ê°œì„œ ëŒ€í™”","ì™„ë²½ ëŒ€ì‹  â€˜ì§€ì†â€™"]},
  ENFJ:{weak:["ì‚¬ëŒ ì±™ê¸°ë‹¤ ë³¸ì—… í¬ìƒ","ì¢‹ì€ ì‚¬ëŒ ì½¤í”Œë ‰ìŠ¤","ê±°ì ˆì„ ëª»í•¨"], fix:["ë³¸ì—… KPI 1ê°œë¥¼ ìµœìš°ì„ ","ë„ì›€ì€ â€˜ë²”ìœ„/ê¸°ê°„â€™ ì§€ì •","ê±°ì ˆ ë¬¸ì¥ í…œí”Œë¦¿ ì¤€ë¹„"]},
  ENFP:{weak:["ì‹œì‘ì€ ë¹ ë¥´ë‚˜ ë£¨í‹´ ì•½í•¨","ê°ì • ë”°ë¼ ìš°ì„ ìˆœìœ„ ë³€ê²½","ê³„ì•½/ì •ì‚° ë†“ì¹¨"], fix:["ì£¼ 2íšŒ ê³ ì • ë£¨í‹´(ì›”/ëª©)","ìš°ì„ ìˆœìœ„ëŠ” 2ì£¼ ë‹¨ìœ„ ê³ ì •","ëˆÂ·ê³„ì•½ì€ ì²´í¬ë¦¬ìŠ¤íŠ¸"]},
  ISTJ:{weak:["ë³€í™”ì— ëŠ¦ê²Œ ì ì‘","ìœ ì—°ì„± ë¶€ì¡±ìœ¼ë¡œ ê¸°íšŒ ë†“ì¹¨","í˜¼ì ì±…ì„ ê³¼ë‹¤"], fix:["ì‘ì€ ì‹¤í—˜ì„ â€˜ê·œì¹™â€™ìœ¼ë¡œ ë§Œë“¤ê¸°","50% í™•ë¥ ì´ë©´ ì†Œê·œëª¨ í…ŒìŠ¤íŠ¸","ì—…ë¬´ í‘œì¤€í™”+ìœ„ì„"]},
  ISFJ:{weak:["ë‚¨ ì±™ê¸°ë‹¤ ì†í•´","ë¶ˆë§Œ ëˆ„ì  í›„ í­ë°œ","ìƒˆë¡œìš´ ì‹œì¥ ë‘ë ¤ì›€"], fix:["ì¡°ê±´/ëŒ€ê°€ë¥¼ ë¬¸ì„œí™”","ë¶ˆí¸ì€ ì¦‰ì‹œ 10%ë§Œ ë§í•˜ê¸°","ì‘ì€ í™•ì¥(íŒŒì¼ëŸ¿)ë¶€í„°"]},
  ESTJ:{weak:["ì§ì„¤/í†µì œë¡œ ê°ˆë“±","ì†ë„Â·ì„±ê³¼ë§Œ ë³´ê³  ì‚¬ëŒ ë†“ì¹¨","ê±´ê°•ì„ â€˜ë‚˜ì¤‘ì—â€™"], fix:["â€˜ì™œâ€™ë³´ë‹¤ â€˜ì–´ë–»ê²Œâ€™ ì§ˆë¬¸","ì¹­ì°¬/ì¸ì • ë¹„ìœ¨ ëŠ˜ë¦¬ê¸°","ìš´ë™Â·ìˆ˜ë©´ì„ KPIí™”"]},
  ESFJ:{weak:["í‰íŒ/ê´€ê³„ì— ê³¼ë¯¼","ê±°ì ˆí•˜ë©´ ë¶ˆì•ˆ","ê²°ì •ì— í”ë“¤ë¦¼"], fix:["ê²°ì •ì€ â€˜ì›ì¹™â€™ìœ¼ë¡œ","ê±°ì ˆì€ ì˜ˆì˜+ëŒ€ì•ˆ ì œì‹œ","í•µì‹¬ ê³ ê°/íŒ€ë§Œ ì§‘ì¤‘"]},
  ISTP:{weak:["ê´€ì‹¬ ì—†ëŠ” ì¼ ë¯¸ë£¨ê¸°","ë§ ì ì–´ ì˜¤í•´","ë¦¬ìŠ¤í¬ë¥¼ ê³¼ì†Œí‰ê°€"], fix:["ì‹«ì€ ì¼ì€ â€˜15ë¶„ ìŠ¤íƒ€íŠ¸â€™","ì—…ë°ì´íŠ¸ë¥¼ ì§§ê²Œ ê³µìœ ","ë¦¬ìŠ¤í¬ëŠ” ìˆ˜ì¹˜í™”(ìµœì•…/ìµœì„ )"]},
  ISFP:{weak:["ê°ì •/ë¶„ìœ„ê¸°ì— ì¢Œìš°","ê³„íšì´ ëŠìŠ¨","ê°ˆë“± íšŒí”¼"], fix:["ê¸°ë¶„ê³¼ ìƒê´€ì—†ì´ â€˜í•˜ë£¨ 1ê°œâ€™","ë‹¬ë ¥ì— ë¨¼ì € ë°•ê¸°","ê°ˆë“±ì€ â€˜ì‚¬ì‹¤-ìš”ì²­â€™ìœ¼ë¡œ"]},
  ESTP:{weak:["ì¦‰í¥ ë² íŒ…/ê³¼ì†","ì„¸ë¶€ ê³„ì•½/í’ˆì§ˆ ë†“ì¹¨","ìê·¹ì— ì¤‘ë…"], fix:["í° ê²°ì •ì€ 24ì‹œê°„ ë£°","ì²´í¬ë¦¬ìŠ¤íŠ¸ í›„ ì‹¤í–‰","ë£¨í‹´(ìš´ë™/ìˆ˜ë©´)ë¡œ ë°¸ëŸ°ìŠ¤"]},
  ESFP:{weak:["ì¬ë¯¸/ì‚¬ëŒì— ì—ë„ˆì§€ ê³¼ì†Œë¹„","ì§€ì¶œ ê´€ë¦¬ ì•½í•¨","ì‹«ì€ ì¼ íšŒí”¼"], fix:["ì£¼ 1íšŒ â€˜ëˆ/ì •ì‚° ë°ì´â€™","ì†Œë¹„ ìƒí•œì„  ì„¤ì •","ì‹«ì€ ì¼ì€ íŒ€/íˆ´ë¡œ ë¶„ë‹´"]}
};

function koGoalLabel(key){
  const m={sales:"ë§¤ì¶œ/ê±°ë˜ì²˜",brand:"ë¸Œëœë”©/ë§ˆì¼€íŒ…",product:"ìƒí’ˆ/ì„œë¹„ìŠ¤",people:"ì¸ì¬/ì¡°ì§",money:"íˆ¬ì/ìì‚°",system:"ì‹œìŠ¤í…œ/ìë™í™”",health:"ê±´ê°•/ìŠµê´€",study:"í•™ìŠµ/ìê²©"};
  return m[key]||key;
}

function monthElem(month){
  // ê³„ì ˆ íë¦„(ëŒ€ëµ): 1í†  2ëª© 3ëª© 4í†  5í™” 6í™” 7í†  8ê¸ˆ 9ê¸ˆ 10í†  11ìˆ˜ 12ìˆ˜
  return ({1:"í† ",2:"ëª©",3:"ëª©",4:"í† ",5:"í™”",6:"í™”",7:"í† ",8:"ê¸ˆ",9:"ê¸ˆ",10:"í† ",11:"ìˆ˜",12:"ìˆ˜"})[month] || "í† ";
}

function lifePhaseText(age, dayElem, maxElem, minElem){
  const phase = age<=27 ? "ì´ˆë…„" : age<=55 ? "ì¤‘ë…„" : "ë§ë…„";
  const core = {
    ì´ˆë…„:"ê¸°ì´ˆ ì²´ë ¥/ê¸°ìˆ /ì¸ë§¥ì„ ìŒ“ëŠ” ìš´. â€˜ê¸¸ê²Œ ê°ˆ êµ¬ì¡°â€™ë¥¼ ë§Œë“¤ìˆ˜ë¡ í›„ë°˜ì´ í¸í•´ì§.",
    ì¤‘ë…„:"í™•ì¥ê³¼ ìˆ˜ìµ ì‹¤í˜„ì˜ ìš´. â€˜ì‚¬ëŒÂ·ì‹œìŠ¤í…œâ€™ì´ ì‹¤ì ì„ ì¢Œìš°í•¨.",
    ë§ë…„:"ì •ë¦¬ì™€ ì•ˆì •ì˜ ìš´. â€˜ë¸Œëœë“œ/ìì‚°/ê´€ê³„â€™ë¥¼ ë‚¨ê¸°ëŠ” ìª½ì´ ìœ ë¦¬í•¨."
  }[phase];

  const elemTips = {
    ëª©:"ìƒˆ íŒì„ ì—¬ëŠ” í˜. ëŒ€ì‹  í•œêº¼ë²ˆì— ë²Œë¦¬ë©´ íƒˆì§„.",
    í™”:"ë¸Œëœë”©Â·ì¸ì§€ë„. ëŒ€ì‹  ê°ì •/ê³¼ì† ì£¼ì˜.",
    í† :"ê¸°ë°˜Â·ì‹ ë¢°Â·ë¶€ë™ì‚°/ì €ì¥. ëŒ€ì‹  ê³ ì§‘/ê³¼ë¡œ ì£¼ì˜.",
    ê¸ˆ:"ê³„ì•½Â·ì •ì‚°Â·í’ˆì§ˆ. ëŒ€ì‹  ëƒ‰ì •í•¨/ê´€ê³„ ë§ˆì°° ì£¼ì˜.",
    ìˆ˜:"ì •ë³´Â·ë„¤íŠ¸ì›Œí¬Â·ìœ í†µ. ëŒ€ì‹  ë¶ˆì•ˆ/ìš°ìœ ë¶€ë‹¨ ì£¼ì˜."
  };

  return {phase, core, strongTip:elemTips[maxElem], weakTip:elemTips[minElem], dayTip:elemTips[dayElem]};
}

function buildMonthAdvice(month, elem, maxElem, minElem, goals, mbti){
  const badge = (elem===maxElem) ? "go" : (elem===minElem) ? "caution" : "ok";
  const badgeText = (elem===maxElem) ? "GO(ì¶”ì§„)" : (elem===minElem) ? "CAUTION(ì¡°ì‹¬)" : "OK(ì•ˆì •)";
  const g = new Set(goals||[]);
  const actions = [];
  const cautions = [];

  // goal-driven actions
  if(g.has("sales")) actions.push("ì‹ ê·œ ê±°ë˜ì²˜/ì±„ë„ 3ê³³ ì´ìƒ â€˜ë¯¸íŒ… ê³ ì •â€™");
  if(g.has("brand")) actions.push("ì½˜í…ì¸ Â·í”„ë¡œëª¨ì…˜ì„ â€˜ìº í˜ì¸â€™ ë‹¨ìœ„ë¡œ ìš´ì˜");
  if(g.has("product")) actions.push("ì œí’ˆ/ì„œë¹„ìŠ¤ 1ê°œ â€˜ê°œì„  ë¦´ë¦¬ì¦ˆâ€™");
  if(g.has("people")) actions.push("ì±„ìš©/íŒŒíŠ¸ë„ˆ 1ëª… â€˜í…ŒìŠ¤íŠ¸ í˜‘ì—…â€™");
  if(g.has("money")) actions.push("ì •ì‚°Â·ì›ê°€Â·í™˜ìœ¨/ë§ˆì§„ ì ê²€ + ìê¸ˆ ê³„íš");
  if(g.has("system")) actions.push("ë°˜ë³µ ì—…ë¬´ 1ê°œ ìë™í™”(í¼/ë´‡/ì‹œíŠ¸)");
  if(g.has("health")) actions.push("ìš´ë™/ìˆ˜ë©´ ë£¨í‹´ 2ì£¼ ì‹¤í—˜");
  if(g.has("study")) actions.push("ì—…ë¬´ì— ë°”ë¡œ ì“°ëŠ” â€˜ì§§ì€ í•™ìŠµâ€™(2~4ì‹œê°„)");

  // element-season nuance
  if(elem==="ëª©") actions.unshift("ìƒˆë¡œìš´ ì œì•ˆ/ëŸ°ì¹­ì„ â€˜ì‘ê²Œâ€™ ì‹œì‘");
  if(elem==="í™”") actions.unshift("ì‚¬ëŒì´ ë³´ëŠ” ê³³ì— ë‚˜ê°€ê¸°(í™ë³´/ì„¸ì¼ì¦ˆ)");
  if(elem==="í† ") actions.unshift("ì›ê°€Â·ì¬ê³ Â·í”„ë¡œì„¸ìŠ¤ ì •ë¦¬");
  if(elem==="ê¸ˆ") actions.unshift("ê³„ì•½/í’ˆì§ˆ/ì •ì‚° â€˜ë¬¸ì„œí™”â€™");
  if(elem==="ìˆ˜") actions.unshift("ì •ë³´ ìˆ˜ì§‘/ë„¤íŠ¸ì›Œí¬/ì¶œì¥ì„ ë°°ì¹˜");

  // cautions by weak elem + mbti tendency
  if(elem===minElem) cautions.push("ì•½í•œ ì˜¤í–‰ ë‹¬: â€˜í˜¼ì í•´ê²°â€™ ê¸ˆì§€(ì™¸ì£¼/ì „ë¬¸ê°€/íˆ´)");
  if(mbti.endsWith("P")) cautions.push("ë§ˆê°ì´ íë ¤ì§€ê¸° ì‰¬ì›€ â†’ â€˜ë‚ ì§œë¥¼ ë¨¼ì € ë°•ê¸°â€™");
  if(mbti.endsWith("J")) cautions.push("ê³ ì§‘/ì™„ë²½ì£¼ì˜ â†’ â€˜í…ŒìŠ¤íŠ¸ í›„ ìˆ˜ì •â€™ í—ˆìš©");
  if(mbti.includes("T")) cautions.push("ì†Œí†µì´ ë”±ë”±í•´ì§ˆ ìˆ˜ ìˆìŒ â†’ í•œ ë²ˆ ë” ë¶€ë“œëŸ½ê²Œ");
  if(mbti.includes("F")) cautions.push("ê¸°ë¶„ì„ ë– ì•ˆê¸° ì‰¬ì›€ â†’ ê¸°ì¤€/ê²½ê³„ì„  ì„¤ì •");

  // element-specific caution
  if(elem==="í™”") cautions.push("ê³¼ì†Â·ì¦‰í¥ ë² íŒ…/ê°ì • ê²°ì • ì£¼ì˜");
  if(elem==="ìˆ˜") cautions.push("ë¶ˆì•ˆ/ìš°ìœ ë¶€ë‹¨ìœ¼ë¡œ íƒ€ì´ë° ë†“ì¹˜ì§€ ì•Šê¸°");
  if(elem==="ê¸ˆ") cautions.push("ê³„ì•½ ë¬¸êµ¬/ì •ì‚° ëˆ„ë½ ì£¼ì˜");
  if(elem==="í† ") cautions.push("ê³¼ë¡œÂ·ì±…ì„ ê³¼ë¶€í•˜ ì£¼ì˜");
  if(elem==="ëª©") cautions.push("ê°€ì§€ì¹˜ê¸° ì—†ëŠ” í™•ì¥ ê¸ˆì§€");

  // keep concise
  const actionList = actions.slice(0,3);
  const cautionList = Array.from(new Set(cautions)).slice(0,3);

  return {badge, badgeText, actionList, cautionList};
}


function render2026Report(name,dayGan,dayElem,mbti,score,lang,extra={}){
  const sorted=Object.entries(score).sort((a,b)=>b[1]-a[1]);
  const maxElem=sorted[0][0];
  const minElem=sorted[sorted.length-1][0];
  const trait=getMbtiTraits(mbti,lang);
  const elemNameKo={ëª©:"ëª©(æœ¨)",í™”:"í™”(ç«)",í† :"í† (åœŸ)",ê¸ˆ:"ê¸ˆ(é‡‘)",ìˆ˜:"ìˆ˜(æ°´)"};
  const strongKo=elemNameKo[maxElem];
  const weakKo=elemNameKo[minElem];

  let html="";
  const safeName = name|| (lang==="ja"?"ã‚ãªãŸ":lang==="th"?"à¸„à¸¸à¸“":lang==="id"?"Anda":"ë‹¹ì‹ ");

  if(lang==="ko"){
    // êµ¬ì²´ì  ì‹œê¸°/í–‰ë™ ì¶”ê°€
    const timingAdvice = {
      ëª©:"1~3ì›”, 9~10ì›”ì²˜ëŸ¼ ê³„ì ˆì´ ë°”ë€ŒëŠ” ì‹œê¸°ì— â€˜ì‹ ê·œ í”„ë¡œì íŠ¸ ì œì•ˆâ€™ê³¼ â€˜ìƒˆ ê±°ë˜ì²˜ ë¯¸íŒ…â€™ì„ ëª°ì•„ì„œ ì¡ì•„ ë³´ì„¸ìš”.",
      í™”:"5~8ì›”, ë§¤ì¶œ í”¼í¬ ì‹œì¦Œê³¼ íœ´ê°€ ì‹œì¦Œ ì „í›„ì— í”„ë¡œëª¨ì…˜Â·ëŸ°ì¹­Â·ë¸Œëœë”© ìº í˜ì¸ì„ ì§‘ì¤‘ì ìœ¼ë¡œ ë°°ì¹˜í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.",
      í† :"3Â·6Â·9Â·12ì›” ë¶„ê¸° ë§ˆê° ì‹œì ì— êµ¬ì¡° ì •ë¦¬, ì¡°ì§ ê°œí¸, ë¹„ìš© ì ê²€ì„ ì •ë¡€í™”í•˜ë©´ í° ë„ì›€ì´ ë©ë‹ˆë‹¤.",
      ê¸ˆ:"ê³„ì•½ê³¼ ì •ì‚°ì´ ëª°ë¦¬ëŠ” ë‹¬(3ì›”, 6ì›”, 9ì›”, 12ì›”)ì— ì¤‘ìš”í•œ ì„œëª…Â·í˜‘ìƒ ì¼ì •ì„ ëª¨ì•„ì„œ ì²˜ë¦¬í•´ ë³´ì„¸ìš”.",
      ìˆ˜:"9~12ì›”, ì—°ë§ë¡œ ê°ˆìˆ˜ë¡ ì •ë³´Â·ë„¤íŠ¸ì›Œí¬ê°€ ê°•í•´ì§€ë‹ˆ, ì„¸ë¯¸ë‚˜Â·ë°•ëŒíšŒÂ·ì¶œì¥ì„ ì´ êµ¬ê°„ì— ë§ì¶”ë©´ ìœ ë¦¬í•©ë‹ˆë‹¤."
    }[maxElem];

    const avoidTiming = {
      ëª©:"ì—¬ë¦„ í•œê°€ìš´ë°(7~8ì›”)ì—ëŠ” ë„ˆë¬´ ë§ì€ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ë™ì‹œì— ë²Œì´ê¸°ë³´ë‹¤, ì´ë¯¸ ì§„í–‰ ì¤‘ì¸ ê²ƒ ì •ë¦¬ì— ë” ì§‘ì¤‘í•˜ì„¸ìš”.",
      í™”:"ì²´ë ¥ê³¼ ê°ì •ì´ ì¶œë ì´ê¸° ì‰¬ìš´ 7~8ì›”ì—ëŠ” â€˜ê°ì •ì ì¸ ê²°ì •â€™ê³¼ â€˜ì¦‰í¥ì ì¸ íˆ¬ìâ€™ëŠ” í•œ ë²ˆ ë” ì¬ê²€í† í•´ ë³´ëŠ” ê²Œ ì¢‹ìŠµë‹ˆë‹¤.",
      í† :"ê³¼ë¡œì™€ ì±…ì„ ê³¼ë¶€í•˜ê°€ ì˜¤ê¸° ì‰¬ìš´ 11~12ì›”ì—ëŠ” ìƒˆë¡œìš´ ì¥ê¸° ì•½ì†ì´ë‚˜ í° ê³ ì •ë¹„ ì¦ê°€ëŠ” ì¡°ê¸ˆ ë¯¸ë£¨ëŠ” í¸ì´ ì•ˆì „í•©ë‹ˆë‹¤.",
      ê¸ˆ:"ìƒëŒ€ê°€ ì •ë¦¬ë˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ ê¸‰í•˜ê²Œ ê³„ì•½ì„ ë°€ì–´ë¶™ì´ëŠ” 1~2ì›”ì€ í”¼í•˜ê³ , ë¬¸ì„œ ê²€í†  ì‹œê°„ì„ ì¶©ë¶„íˆ ë‘ì„¸ìš”.",
      ìˆ˜:"ë©˜íƒˆì´ ì˜ˆë¯¼í•´ì§€ê¸° ì‰¬ìš´ 2~3ì›”ì—ëŠ” ê´€ê³„ ì •ë¦¬Â·í•´ê³ Â·ê²°ë³„ ê°™ì€ ì´ìŠˆëŠ” ìµœëŒ€í•œ ë¶€ë“œëŸ½ê²Œ, ë‹¨ê³„ì ìœ¼ë¡œ ì§„í–‰í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤."
    }
    [minElem];

    // ---- 2026 êµ¬ì²´í™”(ì‚¬ìš©ì ì¶”ê°€ ë°ì´í„°) ----
    const age2026 = (extra && extra.birth && extra.birth.year) ? (2026 - extra.birth.year + 1) : null;
    const life = lifePhaseText(age2026||35, dayElem, maxElem, minElem);
    const mbtiWeak = MBTI_WEAK_KO[mbti] || {weak:[], fix:[]};
    const goals = (extra && extra.goals) ? extra.goals : [];
    const worry = (extra && extra.worry) ? extra.worry : "";
    const role2026 = (extra && extra.role2026) ? extra.role2026 : "biz";
    const focus2026 = (extra && extra.focus2026) ? extra.focus2026 : "growth";
    const risk = (extra && typeof extra.risk === "number") ? extra.risk : 50;

    const roleText = ({biz:"ì‚¬ì—…/ëŒ€í‘œ",job:"ì§ì¥/íŒ€ì¥",switch:"ì´ì§/ì „í™˜",start:"ì°½ì—… ì¤€ë¹„"})[role2026] || "ì‚¬ì—…/ëŒ€í‘œ";
    const focusText = ({growth:"í™•ì¥(ìŠ¤ì¼€ì¼ì—…)",setup:"ê¸°ì´ˆ/ì •ë¹„(ì‹œìŠ¤í…œ)",cleanup:"ì •ë¦¬/ë¦¬ìŠ¤í¬ ê´€ë¦¬"})[focus2026] || "í™•ì¥(ìŠ¤ì¼€ì¼ì—…)";
    const goalsText = (goals && goals.length) ? goals.map(koGoalLabel).join(" Â· ") : "ë¯¸ì„ íƒ(ê¸°ë³¸ ë¦¬ë”©)";

    // ì›”ë³„ íƒ€ì„ë¼ì¸ HTML
    const monthGrid = (()=>{
      let s = `<div class="month-grid">`;
      for(let mm=1; mm<=12; mm++){
        const e = monthElem(mm);
        const a = buildMonthAdvice(mm,e,maxElem,minElem,goals,mbti);
        s += `
          <div class="month-card">
            <div class="month-head">
              <div class="month-title">${mm}ì›” Â· ${e}ì˜ ë‹¬</div>
              <div class="badge ${a.badge}">${a.badgeText}</div>
            </div>
            <ul class="small-list">
              <li><b>ì¶”ì²œ:</b> ${a.actionList.join(" / ")}</li>
              <li><b>ì¡°ì‹¬:</b> ${a.cautionList.join(" / ")}</li>
            </ul>
          </div>`;
      }
      s += `</div>`;
      return s;
    })();

    const contextBlock = `
      <div class="block">
        <h3>0. (ì¶”ê°€ ë°ì´í„° ë°˜ì˜) 2026 ìƒí™© ìš”ì•½</h3>
        <p>
          ì—­í• : <span class="highlight">${roleText}</span> Â·
          í¬ì»¤ìŠ¤: <span class="highlight">${focusText}</span> Â·
          ëª©í‘œ: <span class="highlight">${goalsText}</span>
        </p>
        ${worry?`<p>ì§€ê¸ˆ ê³ ë¯¼: <span class="highlight">${escapeHTML(worry)}</span></p>`:""}
        <p style="margin-top:6px;">â€» ìœ„ ì„ íƒì€ ì•„ë˜ â€˜ì›”ë³„ íƒ€ì„ë¼ì¸â€™ê³¼ â€˜ì¡°ì‹¬ í¬ì¸íŠ¸â€™ì— ë°˜ì˜ë©ë‹ˆë‹¤.</p>
      </div>`;

    const phaseBlock = `
      <div class="block">
        <h3>0. ì´ˆë…„ Â· ì¤‘ë…„ Â· ë§ë…„ ìš´ â€“ í° íë¦„</h3>
        <p>
          ${age2026?`${safeName}ë‹˜ì€ 2026ë…„ ê¸°ì¤€ <span class="highlight">${age2026}ì„¸(í•œêµ­ì‹)</span>ë¡œ, í˜„ì¬ëŠ” <span class="highlight">${life.phase}</span> íë¦„ì— ë” ê°€ê¹ìŠµë‹ˆë‹¤.`:
          `ì¶œìƒë…„ë„ ì…ë ¥ì´ ì—†ì–´, í˜„ì¬ ë‚˜ì´ êµ¬ê°„ì€ â€˜ì¤‘ë…„â€™ ê¸°ì¤€ìœ¼ë¡œ í•´ì„í–ˆìŠµë‹ˆë‹¤(ì •í™•ë„â†‘ë¥¼ ì›í•˜ë©´ ì¶œìƒë…„ë„ë§Œ ì…ë ¥í•´ ì£¼ì„¸ìš”).`}
        </p>
        <ul>
          <li><b>ì´ˆë…„(0~27)</b>: ê¸°ì´ˆ ì²´ë ¥Â·ê¸°ìˆ Â·ì¸ë§¥ì„ ìŒ“ëŠ” ìš´. â€˜ë¹¨ë¦¬ ë§ì´â€™ë³´ë‹¤ <span class="highlight">í•œ ê°€ì§€ë¥¼ ê¹Šê²Œ</span>ê°€ ìœ ë¦¬.</li>
          <li><b>ì¤‘ë…„(28~55)</b>: í™•ì¥Â·ìˆ˜ìµ ì‹¤í˜„ì˜ ìš´. <span class="highlight">ì‚¬ëŒÂ·ì‹œìŠ¤í…œÂ·ë¸Œëœë“œ</span>ê°€ ì„±ì í‘œë¥¼ ê²°ì •.</li>
          <li><b>ë§ë…„(56+)</b>: ì •ë¦¬Â·ì•ˆì •ì˜ ìš´. <span class="highlight">ìì‚°/ë¸Œëœë“œ/ê´€ê³„</span>ë¥¼ ë‚¨ê¸¸ìˆ˜ë¡ í¸í•´ì§.</li>
        </ul>
        <p style="margin-top:6px;">
          â€¢ ë‚´ ì¼ê°„(${dayGan})ì˜ ê¸°ì§ˆ: ${life.dayTip}<br>
          â€¢ ê°•í•œ ì˜¤í–‰(${strongKo})ì„ ì“°ëŠ” ë²•: ${life.strongTip}<br>
          â€¢ ì•½í•œ ì˜¤í–‰(${weakKo})ì„ ë§‰ëŠ” ë²•: ${life.weakTip}
        </p>
      </div>`;

    const weaknessBlock = `
      <div class="block">
        <h3>0. MBTI ì•½ì  ê¸°ë°˜ ë¦¬ìŠ¤í¬ â€“ 2026ë…„ì— íŠ¹íˆ ì¡°ì‹¬í•  ê²ƒ</h3>
        <p>MBTIëŠ” â€˜ì„±í–¥â€™ì´ë¼ì„œ ì¥ì ì´ ê°•í• ìˆ˜ë¡ ë°˜ëŒ€ìª½ì´ ì•½ì ì´ ë©ë‹ˆë‹¤. ì˜¬í•´ëŠ” ê·¸ ì•½ì ì´ <span class="highlight">ëˆÂ·ê´€ê³„Â·ì²´ë ¥</span>ì—ì„œ ë¹„ìš©ìœ¼ë¡œ íŠˆ ìˆ˜ ìˆì–´ìš”.</p>
        <ul>
          ${(mbtiWeak.weak||[]).slice(0,3).map(x=>`<li><b>ì•½ì :</b> ${escapeHTML(x)}</li>`).join("")}
          ${(mbtiWeak.fix||[]).slice(0,3).map(x=>`<li><b>ë³´ì™„:</b> ${escapeHTML(x)}</li>`).join("")}
        </ul>
      </div>`;

    const monthBlock = `
      <div class="block">
        <h3>3.5 2026 ì›”ë³„ íƒ€ì„ë¼ì¸ â€“ â€œì–¸ì œ ë¬´ì—‡ì„ í• ì§€â€</h3>
        <p style="margin-bottom:6px;">
          ì›”ë³„ ì˜¤í–‰(ê³„ì ˆ íë¦„)ì„ ê¸°ì¤€ìœ¼ë¡œ â€˜ì¶”ì§„ ë‹¬â€™ê³¼ â€˜ì¡°ì‹¬ ë‹¬â€™ì„ í‘œì‹œí–ˆìŠµë‹ˆë‹¤.  
          <span class="highlight">GO</span> ë‹¬ì—” ì‹¤í–‰/ì˜ì—…/ëŸ°ì¹­ì„, <span class="highlight">CAUTION</span> ë‹¬ì—” ê³„ì•½Â·ì •ì‚°Â·ì²´ë ¥ ê´€ë¦¬ë¡œ ë°¸ëŸ°ìŠ¤ë¥¼ ì¡ì•„ì£¼ì„¸ìš”.
        </p>
        ${monthGrid}
      </div>`;

    html+=`
    ${contextBlock}
    ${phaseBlock}
    ${weaknessBlock}

    <div class="block">
      <h3>1. 2026ë…„ ì „ì²´ íë¦„ â€“ ${safeName}ë‹˜ì˜ K-ìŠ¤íƒ€ì¼ ìš´ì„¸ ìš”ì•½</h3>
      <p>
        ${safeName}ë‹˜ì€ <span class="highlight">${dayGan}ì¼ê°„Â·${dayElem}ì˜ ê¸°ìš´</span> ìœ„ì— 
        <span class="highlight">${mbti}</span> ìœ í˜•ì´ ê²¹ì³ì ¸ ìˆìŠµë‹ˆë‹¤.  
        ê¸°ë³¸ì ìœ¼ë¡œ <span class="highlight">${trait.ei}</span>, <span class="highlight">${trait.ns}</span>, 
        <span class="highlight">${trait.tf}</span>, <span class="highlight">${trait.jp}</span> ì„±í–¥ì„ ê°€ì§„ ì‚¬ëŒì…ë‹ˆë‹¤.
      </p>
      <p>
        2026ë…„ ë³‘ì˜¤ë…„ì€ ë¶ˆ(ç«) ì—ë„ˆì§€ê°€ ê°•í•˜ê²Œ ì˜¬ë¼ì˜¤ëŠ” í•´ì…ë‹ˆë‹¤.  
        ì´ ë§ì€, <span class="highlight">ì†ë„Â·ë“œë¼ì´ë¸ŒÂ·ë¸Œëœë”©Â·ìŠ¹ë¶€ìˆ˜</span>ê°€ í‚¤ì›Œë“œë¼ëŠ” ëœ»ì…ë‹ˆë‹¤.  
        ì˜¤í–‰ ì ìˆ˜ë¡œ ë³¼ ë•Œ <span class="highlight">ê°€ì¥ ê°•í•œ ê¸°ìš´ì€ ${strongKo}, ê°€ì¥ ì•½í•œ ê¸°ìš´ì€ ${weakKo}</span>ì´ë¯€ë¡œ,  
        ê°•í•œ ìª½ì€ ë°€ì–´ë¶™ì´ê³  ì•½í•œ ìª½ì€ ì‚¬ëŒÂ·ì‹œìŠ¤í…œÂ·ì™¸ì£¼ë¥¼ í†µí•´ ë³´ì™„í•˜ëŠ” ì „ëµì´ ì¢‹ìŠµë‹ˆë‹¤.
      </p>
      <p style="margin-top:4px;">
        âœ” <span class="highlight">ì¶”ì²œ íƒ€ì´ë°:</span> ${timingAdvice || "ìƒë°˜ê¸°(1~6ì›”)ëŠ” ì…‹ì—…, í•˜ë°˜ê¸°(7~12ì›”)ëŠ” ì‹¤í–‰ê³¼ í™•ì¥ì— í¬ì»¤ìŠ¤ë¥¼ ë‘ë©´ ì¢‹ìŠµë‹ˆë‹¤."}<br>
        âœ” <span class="highlight">ì£¼ì˜ íƒ€ì´ë°:</span> ${avoidTiming || "í”¼ë¡œë„ê°€ ëˆ„ì ë˜ëŠ” 7~8ì›”, 11~12ì›”ì—ëŠ” ë¬´ë¦¬í•œ í™•ì¥ì´ë‚˜ ìƒˆë¡œìš´ í° ê³ ì •ë¹„ ì¦ê°€ëŠ” í•œ ë²ˆ ë” ê²€í† í•´ ë³´ì„¸ìš”."}
      </p>
      <div class="tag"><i class="fa-solid fa-bolt"></i>í•µì‹¬ í‚¤ì›Œë“œ: ì†ë„ Â· ë¸Œëœë”© Â· íŒê¹”ê¸°</div>
      <div class="tag"><i class="fa-solid fa-masks-theater"></i>${mbti} Ã— ${dayGan}ì¼ê°„ ì¡°í•©</div>
    </div>

    <div class="block">
      <h3>2. ì§ì¥ & ì‚¬ì—… ì „ëµ â€“ MBTI Ã— ì‚¬ì£¼ ê¸°ë°˜ ì•¡ì…˜ í”Œëœ</h3>
      <p>
        â€¢ <span class="highlight">${trait.ei}</span> ê¸°ì§ˆ ë•ë¶„ì—, 2026ë…„ì—ëŠ” 
        â€œí˜¼ì vs í•¨ê»˜â€ì˜ ë°¸ëŸ°ìŠ¤ë¥¼ ì˜ ë§ì¶”ëŠ” ê²ƒì´ ê´€ê±´ì…ë‹ˆë‹¤.  
        E ì„±í–¥ì´ë¼ë©´ <span class="highlight">ì›” 1~2íšŒ ì´ìƒ ë„¤íŠ¸ì›Œí‚¹/ë¯¸íŒ… ë°ì´</span>ë¥¼ ì•„ì˜ˆ ë‹¬ë ¥ì— ê³ ì •ìœ¼ë¡œ ë„£ì–´ ë‘ê³ ,  
        I ì„±í–¥ì´ë¼ë©´ <span class="highlight">ì£¼ 1íšŒ â€˜í˜¼ì ì •ë¦¬ ì‹œê°„(2~3ì‹œê°„ ë¸”ë¡)â€™</span>ì„ í™•ë³´í•´ ë‘ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
      </p>
      <p>
        â€¢ ${trait.ns} ë•ë¶„ì—, <span class="highlight">${trait.ns.includes("ì§ê´€")?"íŠ¸ë Œë“œ ì½ê¸°ì™€ ìƒˆë¡œìš´ í¬ë§· ì‹¤í—˜":"ë°ì´í„°ì™€ ë£¨í‹´ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ì•ˆì • ì„±ì¥"}</span>ì— ê°•ì ì´ ìˆìŠµë‹ˆë‹¤.  
        Nì´ë©´ ë¶„ê¸°ë§ˆë‹¤ <span class="highlight">â€œìƒˆ í¬ë§·/ì½˜í…ì¸ /ìƒí’ˆ í…ŒìŠ¤íŠ¸ ì£¼ê°„â€</span>ì„ ì¡ê³ ,  
        Sì´ë©´ ë§¤ì›” <span class="highlight">â€œì •ì‚°Â·ë¦¬ë·°Â·ê°œì„  ë°ì´â€</span>ë¥¼ ì§€ì •í•´ ê°™ì€ íŒ¨í„´ìœ¼ë¡œ ë°˜ë³µí•´ ë³´ì„¸ìš”.
      </p>
      <p>
        â€¢ ${trait.tf}ì˜ ì˜í–¥ìœ¼ë¡œ, ì˜ì‚¬ê²°ì •ì€ 
        ${trait.tf.includes("ë…¼ë¦¬")?"ìˆ˜ìµÂ·íš¨ìœ¨Â·ë¦¬ìŠ¤í¬ ê¸°ì¤€ì˜ ëƒ‰ì •í•œ íŒë‹¨":"ì‚¬ëŒÂ·íŒŒíŠ¸ë„ˆì‹­Â·ë¸Œëœë“œ ì´ë¯¸ì§€ ê¸°ì¤€ì˜ ë”°ëœ»í•œ íŒë‹¨"}
        ì´ ì„ì—¬ ìˆìŠµë‹ˆë‹¤.  
        ì¤‘ìš”í•œ ê³„ì•½Â·íˆ¬ìÂ·ì±„ìš©ì€ ì•„ë˜ì²˜ëŸ¼ ë£¨í‹´ì„ ë§Œë“¤ì–´ ë‘ë©´ ì¢‹ìŠµë‹ˆë‹¤.
      </p>
      <ul>
        <li>â‘  ìˆ«ì ì²´í¬ : ë§¤ì¶œÂ·ë§ˆì§„Â·í˜„ê¸ˆ íë¦„ ê¸°ì¤€ìœ¼ë¡œ 1ì°¨ í•„í„°</li>
        <li>â‘¡ ì‚¬ëŒ ì²´í¬ : í•¨ê»˜í•  ì‚¬ëŒÂ·íŒŒíŠ¸ë„ˆì™€ì˜ ì¼€ë¯¸, ì‹ ë¢°ë„ ì²´í¬</li>
        <li>â‘¢ ë§ˆì§€ë§‰ ì ê¹ ë©ˆì¶¤ : â€œì§€ê¸ˆ ê²°ì •í•´ë„ 1ë…„ ë’¤ì— í›„íšŒ ì—†ì„ê¹Œ?â€ë¥¼ ìŠ¤ìŠ¤ë¡œì—ê²Œ í•œ ë²ˆ ë¬¼ì–´ë³´ê¸°</li>
      </ul>
    </div>

    <div class="block">
      <h3>3. ëˆ Â· ê¸°íšŒ Â· ë¦¬ìŠ¤í¬ ê´€ë¦¬ â€“ â€œì–¸ì œ ë¬´ì—‡ì„ í• ì§€â€ íƒ€ì„ë¼ì¸</h3>
      <p>
        ì˜¤í–‰ìƒ <span class="highlight">${strongKo}</span>ì´ ê°•í•˜ë‹¤ëŠ” ê²ƒì€, 
        ê·¸ ê¸°ìš´ê³¼ ì—°ê²°ëœ ì˜ì—­ì—ì„œ <span class="highlight">ë§¤ì¶œê³¼ ê¸°íšŒê°€ í„°ì§€ê¸° ì‰¬ìš´ í•´</span>ë¼ëŠ” ëœ»ì…ë‹ˆë‹¤.  
        ì˜ˆë¥¼ ë“¤ì–´ ëª©(æœ¨)ì€ í™•ì¥Â·ì‹ ê·œ ê±°ë˜ì²˜, í™”(ç«)ëŠ” ë§ˆì¼€íŒ…Â·ë¸Œëœë”©, 
        í† (åœŸ)ëŠ” ë¶€ë™ì‚°Â·ê¸°ë°˜ êµ¬ì¶•, ê¸ˆ(é‡‘)ì€ ê³„ì•½Â·ì •ì‚°, ìˆ˜(æ°´)ëŠ” ì •ë³´Â·ë„¤íŠ¸ì›Œí¬ì™€ ì—°ê²°ë©ë‹ˆë‹¤.
      </p>
      <ul>
        <li>1ë¶„ê¸°(1~3ì›”) : ë°©í–¥Â·ë¸Œëœë“œÂ·ë©”ì¸ ìƒí’ˆì„ ê²°ì •í•˜ê³ , ë¶ˆí•„ìš”í•œ ê°€ì§€ëŠ” ì •ë¦¬</li>
        <li>2ë¶„ê¸°(4~6ì›”) : í…ŒìŠ¤íŠ¸ â†’ ìˆ«ìë¡œ ê²€ì¦ â†’ ê´œì°®ì€ ê²ƒì— ìì› ëª°ì•„ì£¼ê¸°</li>
        <li>3ë¶„ê¸°(7~9ì›”) : ë§ˆì¼€íŒ…/í™ë³´ ì§‘ì¤‘, ì½œë¼ë³´Â·ì œíœ´ ì‹œë„, ê°€ê²©Â·êµ¬ì„± ì¡°ì •</li>
        <li>4ë¶„ê¸°(10~12ì›”) : ìˆ˜ìµ ì‹¤í˜„Â·ì •ë¦¬Â·ì„¸ê¸ˆ ëŒ€ë¹„, ë‚´ë…„ í™•ì¥ ì¤€ë¹„</li>
      </ul>
      <p>
        ë°˜ëŒ€ë¡œ <span class="highlight">${weakKo}</span>ì´ ì•½í•œ ë¶€ë¶„ì€ 
        â€œë‚´ê°€ ì§ì ‘ ë‹¤ í•˜ë ¤ê³  í•˜ë©´ ê³„ì† ìƒˆëŠ” ì˜ì—­â€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
        ì˜ˆë¥¼ ë“¤ì–´,
      </p>
      <ul>
        <li>ì•½í•œ ì˜¤í–‰ì´ ìˆ˜(æ°´)ë¼ë©´ : ë²•Â·ê³„ì•½Â·ì„¸ë¬´ ìª½ì€ ì „ë¬¸ê°€ì—ê²Œ ì¼ì° ë§¡ê¸°ê¸°</li>
        <li>ì•½í•œ ì˜¤í–‰ì´ ê¸ˆ(é‡‘)ì´ë¼ë©´ : ê°€ê²© í˜‘ìƒì€ ìˆ«ìì— ê°•í•œ ë™ë£Œ/íŒŒíŠ¸ë„ˆì™€ í•¨ê»˜ ì§„í–‰</li>
        <li>ì•½í•œ ì˜¤í–‰ì´ í™”(ç«)ë¼ë©´ : ë¸Œëœë”©Â·ë””ìì¸Â·ë§ˆì¼€íŒ…ì€ ì™¸ì£¼/ì „ë¬¸ê°€ì—ê²Œ íˆ¬ì…</li>
      </ul>
      <p>
        íŠ¹íˆ, <span class="highlight">â€œì§€ê¸ˆ ì•„ë‹ˆë©´ ì•ˆ ëœë‹¤â€ëŠ” ëŠë‚Œì´ ê°•í•˜ê²Œ ë“œëŠ” ìˆœê°„</span>ì— í•˜ëŠ” ê¸‰í•œ íˆ¬ìëŠ”  
        ì˜¬í•´ëŠ” í•œ ë²ˆ ë” ìˆ¨ ê³ ë¥´ê³  ê²€í† í•˜ëŠ” ìŠµê´€ì„ ë“¤ì´ë©´, 2027ë…„ì— í›¨ì”¬ ì—¬ìœ  ìˆëŠ” ì„ íƒì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      </p>
    </div>

    ${monthBlock}

    <div class="block">
      <h3>4. 2026ë…„ ì‹¤ì²œ ì²´í¬ë¦¬ìŠ¤íŠ¸ (í˜„ì‹¤ì ì¸ ì•¡ì…˜ í”Œëœ)</h3>
      <p>
        ë§ˆì§€ë§‰ìœ¼ë¡œ, ${safeName}ë‹˜ì˜ ì‚¬ì£¼Â·MBTI ì¡°í•©ì„ ê¸°ì¤€ìœ¼ë¡œ í•œ 2026ë…„ ì²´í¬ë¦¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤.
      </p>
      <ul>
        <li>âœ” ë¶„ê¸°ë§ˆë‹¤ â€œë²„ë¦´ ê²ƒ 1ê°œ, ë” ë°€ì–´ë¶™ì¼ ê²ƒ 1ê°œâ€ë¥¼ ì •ë¦¬í•´ì„œ ì‹¤ì œë¡œ ìŠ¤ì¼€ì¤„ì— ë°˜ì˜í•˜ê¸°</li>
        <li>âœ” ${trait.ei.includes("ì™¸í–¥")?"ì›” 2íšŒ ì´ìƒ, ìƒˆë¡œìš´ ì‚¬ëŒì„ ë§Œë‚˜ëŠ” ìë¦¬ë¥¼ ì˜ë„ì ìœ¼ë¡œ ë§Œë“¤ê¸°":"ì›” 2íšŒ ì´ìƒ, ë°©í•´ë°›ì§€ ì•ŠëŠ” â€˜í˜¼ì ì •ë¦¬ ì‹œê°„â€™ í™•ë³´í•˜ê¸°"}</li>
        <li>âœ” ê°•í•œ ì˜¤í–‰ê³¼ ì—°ê²°ëœ ì—…ë¬´Â·ìƒí’ˆÂ·ê³ ê°êµ°ì— ì‹œê°„ê³¼ ì—ë„ˆì§€ë¥¼ 60% ì´ìƒ ë°°ë¶„í•˜ê¸°</li>
        <li>âœ” ì•½í•œ ì˜¤í–‰ ì˜ì—­ì€ ì´ˆë°˜ë¶€í„° íŒŒíŠ¸ë„ˆ/ì§ì›/ì‹œìŠ¤í…œê³¼ ë‚˜ëˆ  ë§¡ê¸°ê³  í˜¼ì ë– ì•ˆì§€ ì•Šê¸°</li>
        <li>âœ” 2026ë…„ì„ â€œë‹¤ìŒ 3~5ë…„ì„ ì¤€ë¹„í•˜ëŠ” ì„¸íŒ…ì˜ í•´â€ë¼ê³  ìƒê°í•˜ê³ , êµ¬ì¡°Â·ë¸Œëœë“œÂ·ë°ì´í„°ë¥¼ ë‚¨ê¸°ê¸°</li>
      </ul>
      <p style="margin-top:6px;">
        ì´ ë¦¬í¬íŠ¸ëŠ” <span class="highlight">ìš´(æµ) + ì„±í–¥ + ì „ëµ</span>ì„ ë™ì‹œì— ë³´ëŠ” K-ìŠ¤íƒ€ì¼ ê°€ì´ë“œì…ë‹ˆë‹¤.  
        ì™„ë²½íˆ ë§ì•„ë–¨ì–´ì§€ì§€ ì•Šë”ë¼ë„, â€œì–´ë””ì— í˜ì„ ë” ì¤„ì§€, ì–´ë””ë¥¼ ë‚´ë ¤ë†“ì„ì§€â€ ë°©í–¥ì„ ì¡ëŠ” ë‚˜ì¹¨ë°˜ìœ¼ë¡œ ê°€ë³ê²Œ ì°¸ê³ í•´ ì£¼ì„¸ìš”.
      </p>
    </div>
    `;
  }
  else if(lang==="ja"){
    html+=`
    <div class="block">
      <h3>1. 2026å¹´ å…¨ä½“ã®æµã‚Œ</h3>
      <p>
        ${safeName}ã•ã‚“ã¯ <span class="highlight">${dayGan}æ—¥å¹²</span> ã¨ 
        <span class="highlight">${mbti}</span> ã‚¿ã‚¤ãƒ—ãŒé‡ãªã£ãŸæ€§è³ªã‚’æŒã£ã¦ã„ã¾ã™ã€‚  
        ã¤ã¾ã‚Šã€${trait.ei}ï¼${trait.ns}ï¼${trait.tf}ï¼${trait.jp} ã¨ã„ã†è»¸ã§ç‰©äº‹ã‚’è¦‹ã¦å‹•ãäººã§ã™ã€‚
      </p>
      <p>
        2026å¹´ ä¸™åˆå¹´ã¯ã€ç«ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒå¼·ãç«‹ã¡ä¸ŠãŒã‚‹å¹´ã§ã™ã€‚  
        ã‚¹ãƒ”ãƒ¼ãƒ‰æ„Ÿãƒ»ãƒ–ãƒ©ãƒ³ãƒ‰åŠ›ãƒ»æ±ºæ–­åŠ›ãŒå•ã‚ã‚Œã‚‹ä¸€å¹´ã§ã‚ã‚Šã€äº”è¡Œã§ã¯
        <span class="highlight">æœ€ã‚‚å¼·ã„è¦ç´ ãŒ ${strongKo}ã€å¼±ã„è¦ç´ ãŒ ${weakKo}</span> ã¨ãªã£ã¦ã„ã¾ã™ã€‚
      </p>
      <p>
        ãŠãŠã¾ã‹ã«è¨€ãˆã°ã€<span class="highlight">ä¸ŠåŠæœŸã¯ã€Œæº–å‚™ã¨ä»•è¾¼ã¿ã€ã€ä¸‹åŠæœŸã¯ã€Œå‹è² ã©ã“ã‚ã€</span>ã¨è€ƒãˆã‚‹ã¨å‹•ãã‚„ã™ããªã‚Šã¾ã™ã€‚
      </p>
    </div>
    <div class="block">
      <h3>2. ã‚­ãƒ£ãƒªã‚¢ãƒ»ãƒ“ã‚¸ãƒã‚¹æˆ¦ç•¥</h3>
      <p>
        ${trait.ei} ã¨ã„ã†è»¸ã‹ã‚‰ã€2026å¹´ã¯
        ã€Œä¸€äººã§è€ƒãˆã‚‹æ™‚é–“ã€ã¨ã€Œäººå‰ã«å‡ºã‚‹æ™‚é–“ã€ã®ãƒãƒ©ãƒ³ã‚¹ã‚’æ„è­˜ã™ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚  
        Eãªã‚‰ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ»å–¶æ¥­ãƒ»äººè„ˆã¥ãã‚Šã€Iãªã‚‰ä¼ç”»ãƒ»è³‡æ–™ä½œæˆãƒ»ä»•çµ„ã¿ã¥ãã‚Šã«é›†ä¸­ã™ã‚‹ã¨æˆæœãŒå‡ºã‚„ã™ããªã‚Šã¾ã™ã€‚
      </p>
      <p>
        ${trait.ns} ã¨ã„ã†æ€§è³ªã®ãŠã‹ã’ã§ã€  
        Nã‚¿ã‚¤ãƒ—ãªã‚‰æ–°ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ»æ–°å¸‚å ´ã¸ã®ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã€Sã‚¿ã‚¤ãƒ—ãªã‚‰æ—¢å­˜ãƒ“ã‚¸ãƒã‚¹ã®å®‰å®šåŒ–ã¨æ”¹å–„ãŒå¾—æ„åˆ†é‡ã§ã™ã€‚
      </p>
      <ul>
        <li>ä¼šè­°ã¯çŸ­ããƒ»å›æ•°å¤šã‚ï¼ˆ60åˆ†1å›ã‚ˆã‚Š20åˆ†3å›ï¼‰</li>
        <li>å¼·ã„äº”è¡Œã«é–¢ã‚ã‚‹ä»•äº‹ã¸æ™‚é–“ã‚’å„ªå…ˆé…åˆ†ã™ã‚‹</li>
        <li>å¼±ã„äº”è¡Œã¯ã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚„å°‚é–€å®¶ã«ä»»ã›ã‚‹ä»•çµ„ã¿ã‚’æ—©ã‚ã«æ•´ãˆã‚‹</li>
      </ul>
    </div>
    <div class="block">
      <h3>3. ãŠé‡‘ãƒ»ãƒãƒ£ãƒ³ã‚¹ãƒ»ãƒªã‚¹ã‚¯ç®¡ç†</h3>
      <p>
        ${strongKo} ãŒå¼·ã„ã¨ã„ã†ã“ã¨ã¯ã€ãã®è¦ç´ ã«é–¢ã‚ã‚‹é ˜åŸŸã§å£²ä¸Šã‚„ãƒãƒ£ãƒ³ã‚¹ãŒç”Ÿã¾ã‚Œã‚„ã™ã„ã¨ã„ã†æ„å‘³ã§ã™ã€‚  
        é€†ã« ${weakKo} ãŒå¼±ã„éƒ¨åˆ†ã¯ã€è‡ªåˆ†ä¸€äººã§æŠ±ãˆè¾¼ã‚€ã¨ç–²ã‚Œã‚„ã™ã„ã®ã§ã€å¤–æ³¨ã‚„ãƒ„ãƒ¼ãƒ«ã®æ´»ç”¨ã‚’å‰æã«è¨­è¨ˆã—ã¦ãŠãã¨å®‰å¿ƒã§ã™ã€‚
      </p>
    </div>
    <div class="block">
      <h3>4. 2026å¹´ è¡Œå‹•ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</h3>
      <ul>
        <li>âœ” å››åŠæœŸã”ã¨ã«ã€Œã‚„ã‚ã‚‹ã“ã¨ã€ã¨ã€Œã‚‚ã£ã¨åŠ›ã‚’å…¥ã‚Œã‚‹ã“ã¨ã€ã‚’1ã¤ãšã¤æ±ºã‚ã‚‹</li>
        <li>âœ” ${trait.ei.includes("å¤–å‘")?"æœˆ2å›ä»¥ä¸Šã¯æ–°ã—ã„äººã¨ã®å‡ºä¼šã„ã®å ´ã‚’ä½œã‚‹":"æœˆ2å›ä»¥ä¸Šã¯ä¸€äººã§è½ã¡ç€ã„ã¦è€ƒãˆã‚‹æ™‚é–“ã‚’ç¢ºä¿ã™ã‚‹"}</li>
        <li>âœ” å¼·ã„äº”è¡Œã¨ã¤ãªãŒã‚‹ä»•äº‹ãƒ»æ¡ˆä»¶ã«6å‰²ä»¥ä¸Šã®æ™‚é–“ã‚’æŠ•è³‡ã™ã‚‹</li>
        <li>âœ” å¼±ã„äº”è¡Œã¯ã€æœ€åˆã‹ã‚‰äººãƒ»ä»•çµ„ã¿ãƒ»å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã«ä»»ã›ã‚‹è¨­è¨ˆã«ã™ã‚‹</li>
      </ul>
    </div>`;
  }
  else if(lang==="th"){
    html+=`
    <div class="block">
      <h3>1. à¸ à¸²à¸à¸£à¸§à¸¡à¸›à¸µ 2026</h3>
      <p>
        à¸„à¸¸à¸“${safeName} à¸¡à¸µà¹à¸à¸™à¸”à¸§à¸‡à¹€à¸›à¹‡à¸™ <span class="highlight">${dayGan}</span> à¹à¸¥à¸°à¸¡à¸µà¸šà¸¸à¸„à¸¥à¸´à¸à¸ à¸²à¸à¹à¸šà¸š 
        <span class="highlight">${mbti}</span>  
        à¸£à¸§à¸¡à¸à¸±à¸™à¸­à¸­à¸à¸¡à¸²à¹€à¸›à¹‡à¸™à¸„à¸™à¸ªà¹„à¸•à¸¥à¹Œ ${trait.ei} / ${trait.ns} / ${trait.tf} / ${trait.jp}
      </p>
      <p>
        à¸›à¸µ 2026 (ä¸™åˆ) à¹€à¸›à¹‡à¸™à¸›à¸µà¸—à¸µà¹ˆà¸à¸¥à¸±à¸‡à¹„à¸Ÿà¹€à¸”à¹ˆà¸™ à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸„à¸§à¸²à¸¡à¹€à¸£à¹‡à¸§ à¹à¸£à¸‡à¹€à¸«à¸§à¸µà¹ˆà¸¢à¸‡ à¹à¸¥à¸°à¸ à¸²à¸à¸¥à¸±à¸à¸©à¸“à¹Œà¸ˆà¸¶à¸‡à¸ªà¸³à¸„à¸±à¸à¸¡à¸²à¸  
        à¸˜à¸²à¸•à¸¸à¸—à¸µà¹ˆà¹€à¸”à¹ˆà¸™à¸—à¸µà¹ˆà¸ªà¸¸à¸”à¸„à¸·à¸­ <span class="highlight">${strongKo}</span> à¹à¸¥à¸°à¸—à¸µà¹ˆà¸­à¹ˆà¸­à¸™à¸—à¸µà¹ˆà¸ªà¸¸à¸”à¸„à¸·à¸­ 
        <span class="highlight">${weakKo}</span> à¸‹à¸¶à¹ˆà¸‡à¸šà¸­à¸à¹€à¸£à¸²à¸§à¹ˆà¸²à¸„à¸§à¸£ â€œà¹€à¸£à¹ˆà¸‡â€ à¸•à¸£à¸‡à¹„à¸«à¸™ à¹à¸¥à¸° â€œà¸ˆà¹‰à¸²à¸‡/à¹ƒà¸«à¹‰à¸„à¸™à¸Šà¹ˆà¸§à¸¢â€ à¸•à¸£à¸‡à¹„à¸«à¸™
      </p>
    </div>
    <div class="block">
      <h3>2. à¸‡à¸²à¸™à¸›à¸£à¸°à¸ˆà¸³à¹à¸¥à¸°à¸˜à¸¸à¸£à¸à¸´à¸ˆ â€“ à¸à¸¥à¸¢à¸¸à¸—à¸˜à¹Œà¸ˆà¸²à¸ MBTI Ã— à¸‹à¸²à¸ˆà¸¹</h3>
      <p>
        à¸ˆà¸²à¸ ${trait.ei} à¸–à¹‰à¸²à¹€à¸›à¹‡à¸™ E à¸„à¸§à¸£à¸­à¸­à¸à¸«à¸™à¹‰à¸²à¹ƒà¸™à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸¥à¸¹à¸à¸„à¹‰à¸² à¸à¸²à¸£à¸à¸£à¸µà¹€à¸‹à¸™à¸•à¹Œ à¹à¸¥à¸°à¸à¸²à¸£à¸„à¸¸à¸¢à¸”à¸µà¸¥  
        à¸–à¹‰à¸²à¹€à¸›à¹‡à¸™ I à¸„à¸§à¸£à¹‚à¸Ÿà¸à¸±à¸ªà¸‡à¸²à¸™à¸§à¸²à¸‡à¸£à¸°à¸šà¸š à¹€à¸‚à¸µà¸¢à¸™à¹à¸œà¸™ à¸—à¸³à¹€à¸­à¸à¸ªà¸²à¸£ à¸„à¸´à¸”à¸„à¸­à¸™à¹€à¸‹à¸›à¸•à¹Œà¸­à¸¢à¸¹à¹ˆà¸«à¸¥à¸±à¸‡à¸šà¹‰à¸²à¸™
      </p>
      <p>
        ${trait.ns} à¸—à¸³à¹ƒà¸«à¹‰à¸„à¸¸à¸“à¹€à¸”à¹ˆà¸™à¸—à¸±à¹‰à¸‡à¸”à¹‰à¸²à¸™ 
        ${trait.ns.includes("à¹„à¸­à¹€à¸”à¸µà¸¢")?"à¸à¸²à¸£à¸¡à¸­à¸‡à¸ à¸²à¸à¹ƒà¸«à¸à¹ˆà¹à¸¥à¸°à¹„à¸­à¹€à¸”à¸µà¸¢à¹ƒà¸«à¸¡à¹ˆ à¹†":"à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸‡à¸²à¸™ routine à¹à¸¥à¸°à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¹€à¸¥à¹‡à¸ à¹†"}  
        à¹ƒà¸Šà¹‰à¸ˆà¸¸à¸”à¸™à¸µà¹‰à¹€à¸›à¹‡à¸™à¸ˆà¸¸à¸”à¸‚à¸²à¸¢à¸«à¸¥à¸±à¸à¹ƒà¸™à¸—à¸µà¹ˆà¸—à¸³à¸‡à¸²à¸™à¸«à¸£à¸·à¸­à¸à¸±à¸šà¸¥à¸¹à¸à¸„à¹‰à¸²
      </p>
    </div>
    <div class="block">
      <h3>3. à¹€à¸‡à¸´à¸™ à¹‚à¸­à¸à¸²à¸ª à¹à¸¥à¸°à¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¹ˆà¸¢à¸‡</h3>
      <p>
        à¸˜à¸²à¸•à¸¸à¹€à¸”à¹ˆà¸™ <span class="highlight">${strongKo}</span> à¸„à¸·à¸­à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¸—à¸µà¹ˆ â€œà¸”à¸±à¸™à¹à¸¥à¹‰à¸§à¸‚à¸¶à¹‰à¸™â€ à¹€à¸Šà¹ˆà¸™ à¸¥à¸¹à¸à¸„à¹‰à¸²à¹ƒà¸«à¸¡à¹ˆ à¹‚à¸›à¸£à¹€à¸ˆà¸à¸•à¹Œà¹ƒà¸«à¸¡à¹ˆ à¸«à¸£à¸·à¸­à¸à¸²à¸£à¸ªà¸£à¹‰à¸²à¸‡à¹à¸šà¸£à¸™à¸”à¹Œ  
        à¸ªà¹ˆà¸§à¸™à¸˜à¸²à¸•à¸¸à¸­à¹ˆà¸­à¸™ <span class="highlight">${weakKo}</span> à¸„à¸·à¸­à¸ˆà¸¸à¸”à¸—à¸µà¹ˆà¸¡à¸±à¸à¸ˆà¸°à¹€à¸«à¸™à¸·à¹ˆà¸­à¸¢à¸«à¸£à¸·à¸­à¸¡à¸µà¸£à¸¹à¸£à¸±à¹ˆà¸§ à¸„à¸§à¸£à¸›à¸´à¸”à¸”à¹‰à¸§à¸¢à¸—à¸µà¸¡ à¸£à¸°à¸šà¸š à¸«à¸£à¸·à¸­à¸œà¸¹à¹‰à¹€à¸Šà¸µà¹ˆà¸¢à¸§à¸Šà¸²à¸
      </p>
    </div>
    <div class="block">
      <h3>4. à¹€à¸Šà¹‡à¸à¸¥à¸´à¸ªà¸•à¹Œà¸¥à¸‡à¸¡à¸·à¸­à¸—à¸³à¸›à¸µ 2026</h3>
      <ul>
        <li>âœ” à¸—à¸¸à¸à¹„à¸•à¸£à¸¡à¸²à¸ª à¹€à¸‚à¸µà¸¢à¸™ 1 à¸­à¸¢à¹ˆà¸²à¸‡à¸—à¸µà¹ˆà¸ˆà¸°à¸«à¸¢à¸¸à¸”à¸—à¸³ à¹à¸¥à¸° 1 à¸­à¸¢à¹ˆà¸²à¸‡à¸—à¸µà¹ˆà¸ˆà¸°à¹€à¸£à¹ˆà¸‡à¸—à¸³</li>
        <li>âœ” ${trait.ei.includes("à¸­à¸­à¸à¸™à¸­à¸à¸šà¹‰à¸²à¸™")?"à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢à¹€à¸”à¸·à¸­à¸™à¸¥à¸° 2 à¸„à¸£à¸±à¹‰à¸‡ à¸­à¸­à¸à¹„à¸›à¸à¸šà¸„à¸™à¹ƒà¸«à¸¡à¹ˆ à¹†":"à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢à¹€à¸”à¸·à¸­à¸™à¸¥à¸° 2 à¸„à¸£à¸±à¹‰à¸‡ à¸›à¸´à¸”à¹‚à¸«à¸¡à¸”à¸­à¸¢à¸¹à¹ˆà¸à¸±à¸šà¸•à¸±à¸§à¹€à¸­à¸‡à¹€à¸à¸·à¹ˆà¸­à¸„à¸´à¸”à¹à¸¥à¸°à¸§à¸²à¸‡à¹à¸œà¸™"}</li>
        <li>âœ” à¸¥à¸‡à¹€à¸§à¸¥à¸²à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 60% à¸à¸±à¸šà¸‡à¸²à¸™à¸—à¸µà¹ˆà¸ªà¸­à¸”à¸„à¸¥à¹‰à¸­à¸‡à¸à¸±à¸šà¸˜à¸²à¸•à¸¸à¹€à¸”à¹ˆà¸™</li>
        <li>âœ” à¸˜à¸²à¸•à¸¸à¸­à¹ˆà¸­à¸™à¹ƒà¸«à¹‰à¸„à¸´à¸”à¸§à¹ˆà¸²à¸ˆà¸°à¹ƒà¸Šà¹‰à¸„à¸™ à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¡à¸·à¸­ à¸«à¸£à¸·à¸­à¸£à¸°à¸šà¸šà¸­à¸°à¹„à¸£à¸Šà¹ˆà¸§à¸¢à¹à¸—à¸™à¸•à¸±à¸§à¹€à¸­à¸‡</li>
      </ul>
    </div>`;
  }
  else if(lang==="id"){
    html+=`
    <div class="block">
      <h3>1. Gambaran umum tahun 2026</h3>
      <p>
        ${safeName} memiliki batang hari <span class="highlight">${dayGan}</span> dan tipe kepribadian 
        <span class="highlight">${mbti}</span>.  
        Artinya Anda bergerak dengan pola ${trait.ei}, ${trait.ns}, ${trait.tf}, dan ${trait.jp}.
      </p>
      <p>
        Tahun 2026 (ä¸™åˆ) penuh dengan energi api: cepat, agresif, dan penuh branding.  
        Unsur terkuat Anda adalah <span class="highlight">${strongKo}</span> dan yang terlemah adalah 
        <span class="highlight">${weakKo}</span>, yang menjadi petunjuk di mana harus gas dan di mana harus hati-hati.
      </p>
    </div>
    <div class="block">
      <h3>2. Strategi karier & bisnis</h3>
      <p>
        Dari sisi ${trait.ei},  
        jika Anda tipe E, perbanyak peran di depan: presentasi, negosiasi, dan networking.  
        Jika I, fokuslah pada riset, perencanaan, dokumen, dan desain sistem kerja.
      </p>
      <p>
        ${trait.ns} membuat Anda kuat di 
        ${trait.ns.includes("ide")?"ide baru, tren, dan visi jangka panjang":"detail, SOP, dan eksekusi harian yang rapi"}.  
        Jadikan ini sebagai value utama yang Anda tawarkan ke tim atau klien.
      </p>
    </div>
    <div class="block">
      <h3>3. Uang, peluang, dan risiko</h3>
      <p>
        Unsur kuat <span class="highlight">${strongKo}</span> adalah area di mana peluang dan omzet mudah naik.  
        Unsur lemah <span class="highlight">${weakKo}</span> sebaiknya sejak awal di-backup dengan tim, tools, atau vendor.
      </p>
    </div>
    <div class="block">
      <h3>4. Checklist aksi 2026</h3>
      <ul>
        <li>âœ” Tiap kuartal pilih 1 hal yang dihentikan dan 1 hal yang digas terus</li>
        <li>âœ” ${trait.ei.includes("Ekstrovert")?"Minimal 2 kali sebulan hadir di event atau pertemuan baru":"Minimal 2 kali sebulan sediakan waktu khusus untuk refleksi dan perencanaan"} </li>
        <li>âœ” Salurkan â‰¥60% energi ke pekerjaan yang selaras dengan unsur kuat</li>
        <li>âœ” Gunakan orang/sistem untuk menutup area unsur lemah agar tidak bocor</li>
      </ul>
    </div>`;
  }

  document.getElementById("reportBlocks").innerHTML=html;
}

// ğŸ”® ëœë¤ Creative ëª¨ë“œìš© í…ìŠ¤íŠ¸ ìƒì„± (ì™„ì „ ë¬´ë£Œ/í”„ë¡ íŠ¸ ì „ìš©)
function getPseudoCreativeText(payload){
  const {lang,name,mbti,dayGan,dayElem,score} = payload;
  const sorted=Object.entries(score).sort((a,b)=>b[1]-a[1]);
  const strong=sorted[0][0];
  const weak=sorted[sorted.length-1][0];
  const safeName=name || (lang==="ja"?"ã‚ãªãŸ":lang==="th"?"à¸„à¸¸à¸“":lang==="id"?"Anda":"ë‹¹ì‹ ");

  if(lang!=="ko"){
    // ë‹¤ë¥¸ ì–¸ì–´ëŠ” ì¼ë‹¨ ì§§ì€ ë²„ì „
    return `${safeName}ë‹˜ì„ ìœ„í•œ ë³´ë„ˆìŠ¤ ë¦¬ë”©ì€ í˜„ì¬ í•œêµ­ì–´ ë²„ì „ì´ ê°€ì¥ í’ë¶€í•©ë‹ˆë‹¤. 
ì–¸ì–´ ì„¤ì •ì„ Koreanìœ¼ë¡œ ë°”ê¾¸ë©´ ë” ìì„¸í•œ Creative ë¦¬ë”©ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
  }

  // í•œêµ­ì–´ìš© ëœë¤ ì¡°í•©
  const strongMap = {
    ëª©:"ì‚¬ëŒÂ·ì¡°ì§Â·í™•ì¥ì— ê°•í•œ í•´ì…ë‹ˆë‹¤. í˜‘ì—… ì œì•ˆ, ìƒˆ íŒŒíŠ¸ë„ˆ ë°œêµ´, ì‹ ê·œ ê±°ë˜ì²˜ ì˜¤í”ˆ ê°™ì€ â€˜íŒì„ ë„“íˆëŠ” ì¼â€™ì€ ì›¬ë§Œí•˜ë©´ í•´ ë³´ëŠ” ìª½ì´ ìœ ë¦¬í•©ë‹ˆë‹¤.",
    í™”:"ë¸Œëœë”©Â·ë§ˆì¼€íŒ…Â·ë…¸ì¶œ ìš´ì´ ê°•í•©ë‹ˆë‹¤. ì–¼êµ´ê³¼ ì´ë¦„ì„ ë“œëŸ¬ë‚´ëŠ” í™œë™, ì½˜í…ì¸  ì—…ë¡œë“œ, ê°•ì—°Â·ì„¸ë¯¸ë‚˜ëŠ” ìƒê°ë³´ë‹¤ í° íŒŒê¸‰ë ¥ì„ ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    í† :"ì‹ ë¢°Â·ì•ˆì •Â·ê¾¸ì¤€í•¨ì´ ë¬´ê¸°ì¸ í•´ì…ë‹ˆë‹¤. ë‹¨ê¸° í•œ ë°©ë³´ë‹¤, ë§¤ë‹¬ ê¾¸ì¤€íˆ ìŒ“ì´ëŠ” êµ¬ë…Â·ë‹¨ê³¨Â·ë°˜ë³µ ë§¤ì¶œ êµ¬ì¡°ë¥¼ ë§Œë“œëŠ” ë° ì§‘ì¤‘í•´ ë³´ì„¸ìš”.",
    ê¸ˆ:"ê³„ì•½Â·í˜‘ìƒÂ·ì •ë¦¬ì˜ ìš´ì´ ê°•í•©ë‹ˆë‹¤. ê·¸ë™ì•ˆ ì• ë§¤í•˜ê²Œ ëŒì–´ì˜¤ë˜ ê³„ì•½, ë¯¸ìˆ˜ê¸ˆ, ì§€ë¶„ êµ¬ì¡°ë¥¼ ì˜¬í•´ ì•ˆì— í•œ ë²ˆ ì •ë¦¬í•´ ë‘ë©´ ì¢‹ìŠµë‹ˆë‹¤.",
    ìˆ˜:"ì •ë³´Â·ë„¤íŠ¸ì›Œí¬Â·ë°°ì›€ì˜ ìš´ì´ ê°•í•©ë‹ˆë‹¤. ê°•ì˜Â·ì»¨í¼ëŸ°ìŠ¤Â·ìŠ¤í„°ë””ì— íˆ¬ìí•œ ì‹œê°„ê³¼ ëˆì´ 1~2ë…„ ë’¤ì— í¬ê²Œ ëŒì•„ì˜¬ ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤."
  };

  const weakMap = {
    ëª©:"ì‚¬ëŒì„ ë„ˆë¬´ ë§ì´ ëŒì–´ë“¤ì´ë©´ ì˜¤íˆë ¤ ê´€ë¦¬ê°€ ì•ˆ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜¬í•´ëŠ” â€˜ì‚¬ëŒ ìˆ˜â€™ë³´ë‹¤ â€˜í•µì‹¬ ë©¤ë²„ 1~2ëª…â€™ì— ì§‘ì¤‘í•´ ë³´ì„¸ìš”.",
    í™”:"ê°ì •ì´ ì•ì„¤ ë•Œ ë°”ë¡œ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ê±°ë‚˜ SNSì— ê¸€ì„ ì˜¬ë¦¬ëŠ” ê±´ í”¼í•˜ëŠ” ê²Œ ì¢‹ìŠµë‹ˆë‹¤. ìµœì†Œ 10ë¶„ë§Œì´ë¼ë„ ë¯¸ë¦¬ ì¨ ë†“ê³  ë‹¤ì‹œ ì½ì–´ë³¸ ë’¤ì— ë³´ë‚´ì„¸ìš”.",
    í† :"ì±…ì„ê°ì„ ë„ˆë¬´ ë§ì´ ë– ì•ˆìœ¼ë©´ ì§€ì¹˜ê¸° ì‰½ìŠµë‹ˆë‹¤. â€˜ë‚´ê°€ ì•„ë‹ˆì–´ë„ ë˜ëŠ” ì¼â€™ ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ì–´ ì°¨ê·¼ì°¨ê·¼ ë‚´ë ¤ë†“ëŠ” ì—°ìŠµì´ í•„ìš”í•©ë‹ˆë‹¤.",
    ê¸ˆ:"ë„ˆë¬´ ë””í…Œì¼ì— ë§¤ë‹¬ë¦¬ë©´ ê²°ì •ì´ ë°€ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 100ì ì„ ê¸°ë‹¤ë¦¬ê¸°ë³´ë‹¤, 80ì ì—ì„œ í•œ ë²ˆ ì‹¤í–‰í•´ ë³´ê³  ìˆ˜ì •í•˜ëŠ” íë¦„ì„ ë§Œë“¤ì–´ ë³´ì„¸ìš”.",
    ìˆ˜:"ì •ë³´ ìˆ˜ì§‘ë§Œ í•˜ë‹¤ê°€ íƒ€ì´ë°ì„ ë†“ì¹˜ê¸° ì‰½ìŠµë‹ˆë‹¤. ì¡°ì‚¬ ì‹œê°„ì„ ì •í•´ë‘ê³ , ì•Œê²Œ ëœ ê²ƒ ì¤‘ 1~2ê°œë§Œ ê³¨ë¼ ë°”ë¡œ ì‹¤í–‰í•´ ë³´ëŠ” ìŠµê´€ì´ ë„ì›€ì´ ë©ë‹ˆë‹¤."
  };

  const ei = mbti[0];
  const ns = mbti[1];
  const tf = mbti[2];
  const jp = mbti[3];

  const eiLines = {
    E:[
      "ì´ë²ˆ í•´ì—ëŠ” â€˜ë‚´ê°€ ì°¾ì•„ê°€ì•¼ ì—´ë¦¬ëŠ” ìë¦¬â€™ê°€ ë§ìŠµë‹ˆë‹¤. ì›” 1íšŒ ì´ìƒ, ì¼ë¶€ëŸ¬ ë¶ˆí¸í•œ ëª¨ì„ì´ë‚˜ ìƒˆë¡œìš´ ê·¸ë£¹ì— ë“¤ì–´ê°€ ë³´ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.",
      "ëŒ€ì‹  ê¸°ìš´ì´ ë–¨ì–´ì§€ëŠ” ì‚¬ëŒÂ·ëª¨ì„ì—ëŠ” ì˜ˆì˜ ìˆê²Œ ê±°ë¦¬ë¥¼ ë‘ì–´ë„ ê´œì°®ìŠµë‹ˆë‹¤. ìˆ«ìë³´ë‹¤ ì§ˆì— ì§‘ì¤‘í•˜ëŠ” ê²Œ í¬ì¸íŠ¸ì…ë‹ˆë‹¤."
    ],
    I:[
      "í˜¼ì ì •ë¦¬í•˜ëŠ” ì‹œê°„ì´ ê³§ ëˆì´ ë˜ëŠ” í•´ì…ë‹ˆë‹¤. ì£¼ 1íšŒ 2ì‹œê°„ ì •ë„ëŠ” ì™„ì „íˆ ë°©í•´ë°›ì§€ ì•ŠëŠ” â€˜ë”¥ì›Œí¬ ì‹œê°„â€™ì„ ë‹¬ë ¥ì— ê³ ì •í•´ ë‘ì„¸ìš”.",
      "ì‚¬ëŒì„ ë§Œë‚  ë•ŒëŠ” â€˜ê°€ë³ì§€ë§Œ ì§„ì§œ ëŒ€í™”ê°€ ë˜ëŠ” ì†Œìˆ˜ ì¸ì›â€™ì„ ì¶”ì²œí•©ë‹ˆë‹¤. ê¹Šì´ ìˆëŠ” ëŒ€í™” 1ë²ˆì´ ì–•ì€ ì¡ë‹´ 10ë²ˆë³´ë‹¤ í° ì¸ì‚¬ì´íŠ¸ë¥¼ ì¤ë‹ˆë‹¤."
    ]
  };

  const nsLines = {
    N:[
      "ì•„ì´ë””ì–´ê°€ ë„ˆë¬´ ë§ì´ ë– ì˜¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì „ë¶€ ë‹¤ í•˜ë ¤ê³  í•˜ì§€ ë§ê³ , â€˜3ê°œì›” ì•ˆì— ëˆì´ ë  ê°€ëŠ¥ì„±ì´ ìˆëŠ” ê²ƒâ€™ 1~2ê°œë§Œ ë¨¼ì € í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”.",
      "ë¶„ê¸°ë§ˆë‹¤ â€˜ì‹¤í—˜ ì£¼ê°„â€™ì„ í•˜ë‚˜ ì •í•´ì„œ, í‰ì†Œì— í•´ë³´ê³  ì‹¶ì—ˆë˜ í¬ë§·ì„ ê°€ë³ê²Œë¼ë„ ì‹¤í–‰í•´ ë³´ì„¸ìš”. ì‹¤íŒ¨í•´ë„ ì´ì•¼ê¸°ê±°ë¦¬ê°€ ë©ë‹ˆë‹¤."
    ],
    S:[
      "ì´ë¯¸ í•˜ê³  ìˆëŠ” ì¼ ì¤‘ì—ì„œ â€˜ë°˜ì‘ì´ ê¾¸ì¤€íˆ ì¢‹ì€ ê²ƒâ€™ì„ ì°¾ì•„, ì²´í¬ë¦¬ìŠ¤íŠ¸ì™€ ë§¤ë‰´ì–¼ì„ ë§Œë“¤ì–´ ë‘ë©´ ì¢‹ìŠµë‹ˆë‹¤. ê·¸ê²Œ ê³§ í™•ì¥ ê°€ëŠ¥í•œ ìì‚°ì´ ë©ë‹ˆë‹¤.",
      "ê¸‰í•˜ê²Œ ìƒˆë¡œìš´ íŒì„ ë²Œì´ê¸°ë³´ë‹¤, ì§€ê¸ˆ íŒì—ì„œ ëˆ„ìˆ˜ê°€ ë‚˜ëŠ” ê³³(ì›ê°€, ë™ì„ , ì¬ê³ , ì‘ëŒ€)ì„ í•œ ë²ˆì”©ë§Œ ì ê²€í•´ë„ ìˆ˜ìµë¥ ì´ ê½¤ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
    ]
  };

  const tfLines = {
    T:[
      "ì¤‘ìš”í•œ ê²°ì •ì„ í•  ë•Œ ìˆ«ìì™€ ë…¼ë¦¬ë¡œ ë³´ëŠ” ê±´ í° ì¥ì ì…ë‹ˆë‹¤. ë‹¤ë§Œ, ìƒëŒ€ì˜ ê°ì • ì‹ í˜¸ê°€ ë¹¨ê°„ë¶ˆì¼ ë•ŒëŠ” â€˜ê²°ì •ì„ í•˜ë£¨ ë¯¸ë£¨ëŠ” ê²ƒâ€™ë§Œìœ¼ë¡œë„ ë¦¬ìŠ¤í¬ë¥¼ ë§ì´ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
      "ë³´ê³ ì„œì™€ ìˆ«ìë¥¼ ì¤€ë¹„í•´ ë†“ìœ¼ë©´, ì˜¬í•´ëŠ” ìƒì‚¬ë‚˜ íŒŒíŠ¸ë„ˆë¥¼ ì„¤ë“í•´ì„œ íŒì„ í‚¤ìš°ê¸° ì¢‹ì€ íƒ€ì´ë°ì´ê¸°ë„ í•©ë‹ˆë‹¤."
    ],
    F:[
      "ì‚¬ëŒê³¼ ê´€ê³„ë¥¼ ì±™ê¸°ëŠ” í˜ ë•ë¶„ì—, ì†Œê°œì™€ ì¬ë°©ë¬¸, ì…ì†Œë¬¸ì´ ê°•í•˜ê²Œ ë“¤ì–´ì˜¬ ìˆ˜ ìˆëŠ” í•´ì…ë‹ˆë‹¤. ëŒ€ì‹  â€˜ë‚´ê°€ í˜ë“¤ì–´ì§€ëŠ” ë¶€íƒâ€™ì—ëŠ” ë¯¸ë¦¬ ê¸°ì¤€ì„ ì„ ì •í•´ ë‘ì„¸ìš”.",
      "ê°ì •ì ìœ¼ë¡œ í˜ë“  ëŒ€í™”(ê±°ì ˆ, ê°€ê²© ì¸ìƒ í†µë³´ ë“±)ëŠ” ì˜¤ì „ 10~12ì‹œì²˜ëŸ¼ ì»¨ë””ì…˜ì´ ìƒëŒ€ì ìœ¼ë¡œ ê´œì°®ì„ ë•Œ ì¡ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤."
    ]
  };

  const jpLines = {
    J:[
      "ê³„íšì„ ì„¸ìš°ë©´ ê·¸ëŒ€ë¡œ ë°€ì–´ë¶™ì´ëŠ” í˜ì´ ì¢‹ìŠµë‹ˆë‹¤. ë¶„ê¸°ë³„Â·ì›”ë³„ë¡œ 1~2ê°œì˜ í•µì‹¬ ëª©í‘œë§Œ ì •ë¦¬í•˜ê³ , ë‚˜ë¨¸ì§€ëŠ” ê³¼ê°íˆ â€˜ë‚˜ì¤‘ì—â€™ë¡œ ë¯¸ë¤„ ë‘ì„¸ìš”.",
      "ë‹¤ë§Œ, ê³„íšì´ ì¡°ê¸ˆ í‹€ì–´ì¡Œë‹¤ê³  í•´ì„œ ìŠ¤ìŠ¤ë¡œë¥¼ ë„ˆë¬´ ëª°ì•„ë¶™ì´ì§€ëŠ” ë§ˆì„¸ìš”. ì˜¬í•´ëŠ” 80%ë§Œ ì§€ì¼œë„ ì˜í•œ í•´ì…ë‹ˆë‹¤."
    ],
    P:[
      "ë³€í™”ì— ìœ ì—°í•˜ê²Œ ë°˜ì‘í•˜ëŠ” ì¥ì ì´ í¬ê²Œ ë¹›ë‚˜ëŠ” í•´ì…ë‹ˆë‹¤. ë‹¨, ì¼ì •Â·ëˆê³¼ ê´€ë ¨ëœ ë¶€ë¶„ì€ ìµœì†Œí•œì˜ ë§ˆê°ê³¼ ê·œì¹™ì„ ì •í•´ ë‘ëŠ” ê²Œ ì¢‹ìŠµë‹ˆë‹¤.",
      "ì›” ì´ˆì—ëŠ” â€˜ì´ë²ˆ ë‹¬ì— ê¼­ ëë‚¼ ê²ƒ 1~2ê°œâ€™ë¥¼ ë©”ëª¨í•´ ë‘ê³ , ë‚˜ë¨¸ì§€ëŠ” ììœ ë¡­ê²Œ í˜ë ¤ë³´ë‚´ë„ ê´œì°®ìŠµë‹ˆë‹¤."
    ]
  };

  const strongLine = strongMap[strong] || "ê°•í•œ ì˜¤í–‰ì´ ë“¤ì–´ì™€ì„œ, ë°€ì–´ë¶™ì˜€ì„ ë•Œ ë°˜ì‘ì´ ì˜¤ëŠ” ì˜ì—­ì´ ë¶„ëª…íˆ ìˆìŠµë‹ˆë‹¤. ê·¸ìª½ìœ¼ë¡œ ì‹œê°„ì„ ì¡°ê¸ˆ ë” ì¨ ë³´ì„¸ìš”.";
  const weakLine   = weakMap[weak]   || "ì•½í•œ ì˜¤í–‰ ìª½ì€ â€˜ì™„ë²½í•˜ê²Œ í•˜ë ¤ê³  í•˜ê¸°â€™ë³´ë‹¤, ì‚¬ëŒÂ·ë„êµ¬Â·ì‹œìŠ¤í…œì„ ë¨¼ì € ë– ì˜¬ë¦¬ëŠ” ê²Œ ì¢‹ìŠµë‹ˆë‹¤.";

  const eiPicked = eiLines[ei] ? pickRandomN(eiLines[ei],2) : [];
  const nsPicked = nsLines[ns] ? pickRandomN(nsLines[ns],1) : [];
  const tfPicked = tfLines[tf] ? pickRandomN(tfLines[tf],1) : [];
  const jpPicked = jpLines[jp] ? pickRandomN(jpLines[jp],1) : [];

  const paragraphs = [];

  paragraphs.push(
    `â‘  ${safeName}ë‹˜ì˜ ì˜¬í•´ ì—ë„ˆì§€ë¥¼ í•œ ì¤„ë¡œ ìš”ì•½í•˜ë©´,
â€˜${dayGan}(${dayElem}) + ${mbti}â€™ ì¡°í•©ìœ¼ë¡œ ì›€ì§ì´ëŠ” ì‚¬ëŒì…ë‹ˆë‹¤. 
ì‰½ê²Œ ë§í•´, ê¸°ë³¸ ì„±í–¥ì€ ê·¸ëŒ€ë¡œ ë‘ê³  â€˜í™˜ê²½ê³¼ íƒ€ì´ë°â€™ì„ ì˜ ê³¨ë¼ íƒ€ëŠ” ê²ƒì´ í¬ì¸íŠ¸ì…ë‹ˆë‹¤.`
  );


  // ì¶”ê°€ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ë” í˜„ì‹¤ì ìœ¼ë¡œ (ëª©í‘œ/ê³ ë¯¼/ë¦¬ìŠ¤í¬ì„±í–¥)
  const goals = (extra && Array.isArray(extra.goals)) ? extra.goals : [];
  const goalsKo = goals.length ? goals.map(koGoalLabel).join(" Â· ") : "";
  const worry = (extra && extra.worry) ? extra.worry : "";
  const risk = (extra && typeof extra.risk==="number") ? extra.risk : 50;
  const riskTone = (risk<=35) ? "ë³´ìˆ˜ì ìœ¼ë¡œ" : (risk>=70) ? "ê³µê²©ì ìœ¼ë¡œ" : "ê· í˜•ìˆê²Œ";

  if(goalsKo || worry){
    paragraphs.push(
      `â‘¡(ì¶”ê°€) ${safeName}ë‹˜ì˜ 2026 ëª©í‘œëŠ” ${goalsKo?goalsKo:"(ë¯¸ì„ íƒ)"} ìª½ìœ¼ë¡œ ê¸°ìš´ì´ ê°€ ìˆê³ , `+
      (worry?`ì§€ê¸ˆ ê°€ì¥ í° ê³ ë¯¼ì€ â€œ${worry}â€ì— ê°€ê¹Œì›Œ ë³´ì—¬ìš”. `:"")+
      `ì˜¬í•´ëŠ” ${riskTone} ì›€ì§ì´ë˜, ê²°ì •ì€ â€˜ì‘ê²Œ í…ŒìŠ¤íŠ¸ â†’ í¬ê²Œ í™•ì¥â€™ ìˆœì„œê°€ ê°€ì¥ ì•ˆì „í•©ë‹ˆë‹¤.`
    );
  }

  paragraphs.push(
    `â‘¡ ì˜¤í–‰ ê¸°ì¤€ìœ¼ë¡œ ë³´ë©´, ê°•í•œ ìª½ì€ ${strongLine}
ë°˜ëŒ€ë¡œ ì•½í•œ ìª½ì€ ${weakLine}`
  );

  paragraphs.push(
    `â‘¢ êµ¬ì²´ì ìœ¼ë¡œ â€œì–¸ì œ ë¬´ì—‡ì„ í•˜ë©´ ì¢‹ì„ì§€â€ë¥¼ ì •ë¦¬í•˜ë©´ ëŒ€ëµ ì´ëŸ° ëŠë‚Œì…ë‹ˆë‹¤.

- 1~3ì›” : ë°©í–¥ ì •ë¦¬, ë¶ˆí•„ìš”í•œ ì¼ ì •ë¦¬, ì‘ì€ í…ŒìŠ¤íŠ¸ ì‹œì‘
- 4~6ì›” : ë°˜ì‘ ì¢‹ì€ ê²ƒì— ì‹œê°„Â·ëˆÂ·ì‚¬ëŒì„ ì¡°ê¸ˆ ë” ëª°ì•„ì£¼ê¸°
- 7~9ì›” : ë§ˆì¼€íŒ…Â·ë¸Œëœë”©Â·ì½œë¼ë³´, ì™¸ë¶€ì— ë” ë§ì´ ë…¸ì¶œë˜ê¸°
- 10~12ì›” : ì •ì‚°Â·êµ¬ì¡° ì •ë¦¬Â·ì„¸ê¸ˆÂ·ë‚´ë…„ ì¤€ë¹„ì— í¬ì»¤ìŠ¤

íŠ¹íˆ, ì¤‘ìš”í•œ ê³„ì•½Â·ê²°ì •ì€ â€˜ë‚´ ì»¨ë””ì…˜ì´ ì¢‹ì€ ë‚  ì˜¤ì „â€™ì— ì¡ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤. 
ë°¤ëŠ¦ê²Œ í”¼ê³¤í•œ ìƒíƒœì—ì„œ ê²°ì •í•˜ëŠ” ê±´ ì˜¬í•´ë§Œí¼ì€ í”¼í•˜ëŠ” ê²Œ ì¢‹ìŠµë‹ˆë‹¤.`
  );

  paragraphs.push(
    "â‘£ ì„±í–¥ ë³„ í˜„ì‹¤ì ì¸ íŒì…ë‹ˆë‹¤.\n" +
    (eiPicked.join("\n") || "") + "\n" +
    (nsPicked.join("\n") || "") + "\n" +
    (tfPicked.join("\n") || "") + "\n" +
    (jpPicked.join("\n") || "")
  );

  paragraphs.push(
    "â‘¤ ë§ˆì§€ë§‰ìœ¼ë¡œ, ì´ ë¦¬ë”©ì€ â€˜ì •ë‹µâ€™ì´ë¼ê¸°ë³´ë‹¤ " +
    "ì˜¬í•´ë¥¼ ì–´ë–»ê²Œ ì„¤ê³„í•˜ë©´ ëœ í›„íšŒí• ì§€ë¥¼ í•¨ê»˜ ê³ ë¯¼í•´ ë³´ëŠ” ì°¸ê³ ìš© ì§€ë„ì…ë‹ˆë‹¤. " +
    "ë§ˆìŒì— ì™€ ë‹¿ëŠ” ë¬¸ì¥ 1~2ê°œë§Œ ê³¨ë¼ ì‹¤ì œ ìŠ¤ì¼€ì¤„ê³¼ ë©”ëª¨ì— ì˜®ê²¨ ì ì–´ ë³´ì‹œë©´ ì¶©ë¶„í•©ë‹ˆë‹¤."
  );

  return paragraphs.join("\n\n");
}

// Creative ë¸”ë¡ ë Œë”
function callPseudoCreative(payload){
  const block=document.getElementById("aiCreativeBlock");
  const text=getPseudoCreativeText(payload);
  block.innerHTML = `
    <div class="block">
      <h3>AI Creative Mode â€“ ë³´ë„ˆìŠ¤ ë¦¬ë”©</h3>
      <p style="white-space:pre-line;font-size:0.88rem;">${text}</p>
    </div>
  `;
}

// ë¶„ì„ ì‹œì‘
function startAnalysis(){
  const t=TEXTS[currentLang]||TEXTS.ko;
  const year=+document.getElementById("year").value;
  const month=+document.getElementById("month").value;
  const day=+document.getElementById("day").value;
  const hourVal=document.getElementById("hour").value;
  let name=document.getElementById("name").value.trim();
  if(!name){
    name=currentLang==="ja"?"ã‚ãªãŸ":currentLang==="th"?"à¸„à¸¸à¸“":currentLang==="id"?"Anda":"ë‹¹ì‹ ";
  }
  const mbti=document.getElementById("mbti").value||"INTJ";

  const extra = {
    birth:{year,month,day,hour:hourVal===""?-1:+hourVal},
    role2026:(document.getElementById("role2026")?.value)||"biz",
    focus2026:(document.getElementById("focus2026")?.value)||"growth",
    goals:(document.getElementById("goals")?.value||"").split(",").filter(Boolean),
    risk:parseInt((document.getElementById("risk")?.value||"50"),10),
    worry:(document.getElementById("worry")?.value||"").trim()
  };

  if(!year || !month || !day){
    alert(t.alertMissingDate);
    return;
  }

  document.getElementById("inputCard").style.display="none";
  document.getElementById("loading").style.display="block";

  setTimeout(()=>{
    const h=hourVal===""?-1:+hourVal;
    const saju=getSaju(year,month,day,h);
    const score=calcScore(saju);

    document.getElementById("loading").style.display="none";
    document.getElementById("result").style.display="block";

    const labelMap={
      ko:["ë…„ì£¼","ì›”ì£¼","ì¼ì£¼","ì‹œì£¼"],
      ja:["å¹´æŸ±","æœˆæŸ±","æ—¥æŸ±","æ™‚æŸ±"],
      th:["à¹€à¸ªà¸²à¸›à¸µ","à¹€à¸ªà¸²à¹€à¸”à¸·à¸­à¸™","à¹€à¸ªà¸²à¸§à¸±à¸™","à¹€à¸ªà¸²à¹€à¸§à¸¥à¸²"],
      id:["Pilar Tahun","Pilar Bulan","Pilar Hari","Pilar Jam"]
    };
    const labels=labelMap[currentLang]||labelMap.ko;

    const pillarsDiv=document.getElementById("pillars");
    pillarsDiv.innerHTML="";
    [saju.year,saju.month,saju.day,saju.hour].forEach((p,i)=>{
      if(!p) return;
      const el=document.createElement("div");
      el.className="pillar";
      el.innerHTML=`
        <div class="pillar-label">${labels[i]}</div>
        <div class="pillar-gan">${p.g}</div>
        <div class="pillar-ji">${p.j}</div>
        <div class="pillar-elem">${ELEM[p.g]} (${p.g}${p.j})</div>
      `;
      pillarsDiv.appendChild(el);
    });

    renderChart(score,currentLang);
    renderSoulSphere(ELEM[saju.day.g],score);
    renderElemDesc(score,currentLang);
    renderDayMasterDesc(saju.day.g,ELEM[saju.day.g],currentLang);
    render2026Report(name,saju.day.g,ELEM[saju.day.g],mbti,score,currentLang,extra);

    // ğŸ”® ì²´í¬ë°•ìŠ¤ ONì¼ ë•Œë§Œ ëœë¤ Creative ë³´ë„ˆìŠ¤ ë¦¬ë”© ì‹¤í–‰
    const useCreative = document.getElementById("aiCreative").checked;
    if(useCreative){
      callPseudoCreative({
        lang: currentLang,
        name,
        mbti,
        dayGan: saju.day.g,
        dayElem: ELEM[saju.day.g],
        score,
        extra
      });
    }else{
      document.getElementById("aiCreativeBlock").innerHTML = "";
    }
  },900);
}

// ì´ˆê¸° ë¡œë“œ
window.onload=()=>{
  // ì›”/ì¼ ì˜µì…˜
  const mSel=document.getElementById("month");
  const dSel=document.getElementById("day");
  for(let i=1;i<=12;i++) mSel.innerHTML+=`<option value="${i}">${i}</option>`;
  for(let i=1;i<=31;i++) dSel.innerHTML+=`<option value="${i}">${i}</option>`;

  // MBTI ë²„íŠ¼
  const grid=document.getElementById("mbtiGrid");
  MBTI16.forEach(t=>{
    const el=document.createElement("div");
    el.className="mbti-opt";
    el.innerText=t;
    el.onclick=()=>{
      document.querySelectorAll(".mbti-opt").forEach(x=>x.classList.remove("selected"));
      el.classList.add("selected");
      document.getElementById("mbti").value=t;
    };
    grid.appendChild(el);
  });


  // 2026 ëª©í‘œ ì¹©/ë¦¬ìŠ¤í¬ ë¼ë²¨
  initGoalChips();
  setRiskLabel();
  const riskEl=document.getElementById("risk");
  if(riskEl) riskEl.addEventListener("input", setRiskLabel);

  // ì–¸ì–´ ì´ˆê¸°ê°’ & ê´‘ê³ 
  const browserLang=detectBrowserLang();
  if(["ko","ja","th","id"].includes(browserLang)){
    currentLang=browserLang;
    const langSel=document.getElementById("lang");
    if(langSel) langSel.value=browserLang;
  }
  setLanguage(currentLang);
  updateAdTexts();
};

// init: auto language by browser + build UI
document.addEventListener("DOMContentLoaded", ()=>{
  const browserLang = detectBrowserLang();
  const supported = ["ko","ja","th","id","en"];
  const lang = supported.includes(browserLang) ? browserLang : "en";
  const sel = document.getElementById("lang");
  if(sel) sel.value = lang;
  setLanguage(lang);
  initGoalChips();
  setRiskLabel();
  const riskEl=document.getElementById("risk");
  if(riskEl) riskEl.addEventListener("input", setRiskLabel);
});
</script>
</body>
</html>
